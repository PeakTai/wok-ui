(function(r,A){typeof exports=="object"&&typeof module<"u"?A(exports):typeof define=="function"&&define.amd?define(["exports"],A):(r=typeof globalThis<"u"?globalThis:r||self,A(r.wokUI={}))})(this,function(r){"use strict";var A="";const pe={cancel:"cancel",confirm:"ok","form-err-required":"Please fill in this field.","form-err-must-check":"Please check this.","form-err-number":"Please enter a number.","form-err-min":"Not less than {}.","form-err-max":"Not greater than {}.","form-err-max-select":"Up to {} option(s) can be selected.","form-err-min-select":"Please select at least {} option(s).","form-err-max-length":"You can enter up to {} character(s).","form-err-min-length":"Please enter at least {} character(s)."};function V(i){const[e,t]=i.split("-");if(!e)throw new Error(`Unable to parse lang tag\uFF1A${i}`);return{lang:e.toLowerCase(),region:t?t.toLowerCase():void 0}}class H{constructor(e){this.enMsgs=e;const t=new Map;t.set("-",e),this.#t=new Map,this.#t.set("en",t),this.#e="en",this.#i=e}#e;#i;#t;async findMsgsByLang(e){const t=V(e),s=this.#t.get(t.lang);if(!s)return;let n,l="";if(t.region&&(l=t.region,n=s.get(l)),n||(l="-",n=s.get(l)),!n){const a=s.entries().next();a.value&&([l,n]=a.value)}if(!!n){if(typeof n=="function"){const a=await n();return s.set(l,a),a}return n}}setMsgs(e,t){const s=V(e);let n=this.#t.get(s.lang);n||(n=new Map,this.#t.set(s.lang,n)),n.set(s.region||"-",t)}getSupportedLanguageTags(...e){return e.filter(t=>{const s=V(t);return this.#t.get(s.lang)})}async setLang(e){const t=await this.findMsgsByLang(e);return t?(this.#e=e,this.#i=t,!0):!1}getLang(){return this.#e}buildMsg(e,...t){const s=this.#i[e];if(!t||!t.length)return s;let n=0;return s.replace(/\{\}/g,()=>`${t[n++]}`)}}class O extends H{#e=[];async setLang(e){for(const t of this.#e)await t.setLang(e);return super.setLang(e)}extend(e){const t=new H(e);return this.#e.push(t),t}}const ve={cancel:"\u53D6\u6D88",confirm:"\u786E\u5B9A","form-err-required":"\u8BF7\u586B\u5199\u6B64\u9879","form-err-must-check":"\u5FC5\u987B\u52FE\u9009\u6B64\u9879","form-err-number":"\u8BF7\u8F93\u5165\u4E00\u4E2A\u6570\u5B57","form-err-min":"\u4E0D\u5F97\u5C0F\u4E8E {}","form-err-max":"\u4E0D\u5F97\u5927\u4E8E {}","form-err-max-select":"\u6700\u591A\u53EF\u4EE5\u9009\u62E9 {} \u4E2A\u9009\u9879","form-err-min-select":"\u8BF7\u81F3\u5C11\u9009\u62E9 {} \u4E2A\u9009\u9879","form-err-max-length":"\u6700\u591A\u53EF\u4EE5\u586B\u5199 {} \u4E2A\u5B57\u7B26","form-err-min-length":"\u8BF7\u586B\u5199\u81F3\u5C11 {} \u4E2A\u5B57\u7B26"};let _;function o(){if(_)return _;_=new O(pe),_.setMsgs("zh-CN",ve);const i=_.getSupportedLanguageTags(...navigator.languages);return i.length&&_.setLang(i[0]),_}var kt="",Lt="",Et="",St="",Tt="",Mt="",$t="",It="",Dt="",c=(i=>(i.FADE="animation-fade",i.SCALE_UP="animation-scale-up",i.SCALE_DOWN="animation-scale-down",i.SLIDE_TOP="animation-slide-top",i.SLIDE_BOTTOM="animation-slide-bottom",i.SLIDE_LEFT="animation-slide-left",i.SLIDE_RIGHT="animation-slide-right",i.SHAKE="animation-shake",i))(c||{});const q="animation-provision",ee="animation-reverse";async function f(i){i.el.classList.remove(...Object.values(c),ee),await new Promise(t=>{setTimeout(()=>{t()},0)}),i.el.classList.remove(q);const e=typeof i.duration=="number"&&i.duration>0?i.duration:500;return i.el.style.animationDuration=`${e}ms`,Array.isArray(i.animation)?i.el.classList.add(...i.animation):i.el.classList.add(i.animation),i.reverse&&i.el.classList.add(ee),new Promise(t=>{setTimeout(t,e)})}class d{constructor(e){this.el=e,this.__children=[],this.__destroyed=!1}replaceChild(e,t){if(t.getParent())throw new Error("The module you want to insert already has a parent module");const s=this.__children[e];return s?(this.insertChild(e,t),this.removeChild(s),!0):!1}insertChild(e,t){const s=M(t);if(s.__destroyed)throw console.error("The module to be inserted has been destroyed",s),new Error("The module to be inserted has been destroyed");if(s.getParent())throw new Error("The module you want to insert already has a parent module");if(e===this.__children.length)return this.addChild(s),s.__parent=this,!0;const n=this.__children[e];return n?(this.el.insertBefore(s.el,n.el),this.__children.splice(e,0,s),s.__parent=this,!0):!1}moveChild(e,t){const s=this.getChild(e),n=this.getChild(t);if(!s||!n)return!1;if(this.__children.splice(e,1),this.__children.splice(t,0,s),e>t)this.el.insertBefore(s.el,n.el);else{const l=this.getChild(t+1);l?this.el.insertBefore(s.el,l.el):(this.el.removeChild(s.el),this.el.appendChild(s.el))}return!0}destroy(){if(this.__parent){const e=this.__parent.__children.indexOf(this);e!==-1&&this.__parent.__children.splice(e,1),this.__parent=void 0}this.empty(),this.el.remove(),this.__destroyed=!0}empty(){[...this.__children].forEach(e=>e.destroy())}getParent(){return this.__parent}replaceBy(e){if(!this.__parent)return!1;const t=this.getIndex();return this.__parent.replaceChild(t,e),!0}find(e){const t=[];for(const s of this.__children)e(s)&&t.push(s),t.push(...s.find(e));return t}findFirst(e){for(const t of this.__children){if(e(t))return t;const s=t.findFirst(e);if(s)return s}}addChild(...e){e.filter(t=>t!==void 0).forEach(t=>this.__addSingleChild(t))}__addSingleChild(e){const t=M(e);if(t.__destroyed)throw console.error("The module to be added has been destroyed",e),new Error("The module to be added has been destroyed");if(t.getParent())throw new Error("The module you want to add already has a parent module");t.mount(this.el),this.__children.push(t),t.__parent=this}removeChild(e){let t,s=-1;return typeof e=="number"?(s=e,t=this.__children[e]):(t=e,s=this.__children.findIndex(n=>n===e)),!t||s===-1?!1:(t.__parent=void 0,t.destroy(),this.__children.splice(s,1),!0)}getChildren(){return this.__children}getChild(e){return this.__children[e]}mount(e){if(this.__parent)throw new Error("The current module has already been added to a parent module and cannot be mounted");if(this.__destroyed)throw new Error("The current module has been destroyed !");e.appendChild(this.el)}scrollIntoView(){this.el.scrollIntoView(!0)}getIndex(){return this.__parent?this.__parent.getChildren().findIndex(e=>e===this):-1}scrollIntoViewIfInvisible(){const e=this.el,t=e.getBoundingClientRect();let s=!1;t.top+t.height<0&&(s=!0),t.top+t.height>window.innerHeight&&(s=!0),t.left+t.width<0&&(s=!0),t.left>window.innerWidth&&(s=!0),s&&e.scrollIntoView(!0)}}class N extends d{constructor(e,t){super(e),t&&t.forEach(s=>this.addChild(s))}}class h extends d{constructor(...e){const t=document.createElement("div");super(t),t.classList.add(...e)}}function M(i){if(typeof i=="string"){const e=document.createElement("span");return e.innerText=`${i}`,new N(e)}if(typeof i=="number"){const e=document.createElement("div");return e.style.height=`${i}px`,new N(e)}return i instanceof HTMLElement?new N(i):i instanceof d?i:typeof i=="function"?i():b(i)}function v(i){if(Array.isArray(i))return i.map(e=>M(e));if(typeof i=="function"){const e=[],t=i((...s)=>e.push(...s));return t instanceof d?[t]:e.map(s=>M(s))}else return[M(i)]}function b(i){const e=document.createElement(i.tag||"div");if(i.preHandle&&i.preHandle(e),i.innerText?e.innerText=i.innerText:i.innerHTML&&(e.innerHTML=i.innerHTML),i.attrs){const{attrs:n}=i;Object.keys(i.attrs).forEach(l=>{const a=n[l];typeof a<"u"&&e.setAttribute(l,a)})}if(i.classNames&&(typeof i.classNames=="string"?e.classList.add(i.classNames):e.classList.add(...i.classNames.filter(n=>!!n))),i.style)for(let n in i.style){const l=i.style[n];!l||(e.style[n]=l)}if(i.onClick&&e.addEventListener("click",i.onClick),i.events)for(let n in i.events)e.addEventListener(n,i.events[n]);const t=i.children?v(i.children):[],s=new N(e,t);return i.postHandle&&i.postHandle(e),s}function te(i){const e=new Proxy(i,{get(t,s){return s==="destroy"?()=>{const n=t.getParent();n&&n.removeChild(e),t.el.remove()}:s==="destroyThoroughly"?()=>{t.destroy()}:t[s]}});return e}class be extends d{constructor(e){super(e||document.createElement("div")),this.__pendingRender=!1,this.__cachedModules=new Map}render(){this.__pendingRender=!0,setTimeout(()=>{if(!!this.__pendingRender){this.__pendingRender=!1;try{this.empty(),this.buildContent()}catch(e){console.error(e)}}},0)}cacheModule(e){const t=this.__cachedModules.get(e.key);if(t)return t;const s=te(e.module());return this.__cachedModules.set(e.key,s),s}removeCache(e){const t=this.__cachedModules.get(e);if(t){const{destroyThoroughly:s}=t;typeof s=="function"&&s(),this.__cachedModules.delete(e)}}clearCaches(){for(const e of this.__cachedModules.keys())this.removeCache(e)}destroy(){this.clearCaches(),super.destroy()}}var ie=(i=>(i[i.sm=576]="sm",i[i.md=768]="md",i[i.lg=992]="lg",i[i.xl=1200]="xl",i[i.xxl=1400]="xxl",i))(ie||{});class xe extends d{constructor(e){super(e||document.createElement("div")),this.__respSize="xs",this.__pendingRender=!1,this.__cachedModules=new Map,this.__resizeListener=()=>this.render(!1),window.addEventListener("resize",this.__resizeListener)}render(e=!0){this.__pendingRender=!0,setTimeout(()=>{try{this.__render(e)}catch(t){console.error(t)}},0)}__render(e){if(!this.__pendingRender)return;this.__pendingRender=!1;let t="xs";const s=window.innerWidth;s>=1400?t="xxl":s>=1200?t="xl":s>=992?t="lg":s>=768?t="md":s>=576?t="sm":t="xs",(e||this.__respSize!==t)&&(this.__respSize=t,this.empty(),this.buildContent({respSize:t,windowWidth:s}))}cacheModule(e){const t=this.__cachedModules.get(e.key);if(t)return t;const s=te(e.module());return this.__cachedModules.set(e.key,s),s}removeCache(e){const t=this.__cachedModules.get(e);if(t){const{destroyThoroughly:s}=t;typeof s=="function"&&s(),this.__cachedModules.delete(e)}}clearCaches(){for(const e of this.__cachedModules.keys())this.removeCache(e)}destroy(){this.clearCaches(),super.destroy()}}const se=window.getComputedStyle(document.body).fontSize;let x=se.endsWith("px")?parseInt(se):16;(isNaN(x)||x<14||x>20)&&(x=16);const I={text:x,textSm:x*.75,textLg:x*1.25,textXl:x*1.5,borderRadius:Math.round(x*.375)};Object.freeze(I);let U;function $(){return U||I}function ne(i){const{style:e}=document.body;e.setProperty("--size-text",`${i.text}px`),e.setProperty("--size-text-sm",`${i.textSm}px`),e.setProperty("--size-text-lg",`${i.textLg}px`),e.setProperty("--size-text-xl",`${i.textXl}px`),e.setProperty("--size-border-radius",`${i.borderRadius}px`),document.documentElement.style.fontSize=`${i.text}px`}ne(I);function re(i){const e=Object.assign({},I);for(let t in i){const s=i[t];!s||(e[t]=s)}U=Object.freeze(e),ne(U)}function we(){re(I)}function C(i){return $().text*i}const D={primary:"#1677ff",danger:"#ff4d4f",success:"#198754",warning:"#ffc107",border:"#dee2e6",text:"#303133",textSecondary:"#909399",outline:"#b1d2ff"};Object.freeze(D);let W;function le(i){const{style:e}=document.body;e.setProperty("--color-primary",i.primary),e.setProperty("--color-danger",i.danger),e.setProperty("--color-success",i.success),e.setProperty("--color-warning",i.warning),e.setProperty("--color-border",i.border),e.setProperty("--color-text",i.text),e.setProperty("--color-text-secondary",i.textSecondary),e.setProperty("--color-outline",i.outline),document.body.style.color=i.text}le(D);function u(){return W||D}function ae(i){const e=Object.assign({},D);for(let t in i){const s=i[t];!s||(e[t]=s)}W=Object.freeze(e),le(W)}function Ce(){ae(D)}class g extends d{constructor(e){const t=typeof e=="string"?{text:e}:e,s=t.tag||"span";super(document.createElement(s)),this.el.className="wok-ui-text",this.el.innerText=t.text,t.size&&this.setSize(t.size),t.bold&&(this.el.style.fontWeight="bold"),t.color&&(this.el.style.color=t.color),t.onClick&&this.onClick(t.onClick)}setText(e){return this.el.innerText=e,this}setColor(e){return this.el.style.color=e,this}setSize(e){return e==="sm"?this.el.style.fontSize="0.8rem":e==="default"?this.el.style.fontSize="1rem":e==="large"?this.el.style.fontSize="1.2rem":e==="xl"?this.el.style.fontSize="1.4rem":this.el.style.fontSize=`${e}px`,this}setBold(e){return e?this.el.style.fontWeight="bold":this.el.style.fontWeight="normal",this}onClick(e){return this.el.style.cursor="pointer",this.el.addEventListener("click",e),this}}class oe extends g{constructor(e){super({text:e,size:"default",color:u().text})}}class _e extends g{constructor(e){super({text:e,size:"default",color:u().textSecondary})}}class ke extends g{constructor(e){super({text:e,size:"sm",color:u().textSecondary})}}class Le extends g{constructor(e){super({tag:"h2",text:e,size:"large",color:u().text,bold:!0}),this.el.style.margin="0"}}class Ee extends g{constructor(e){super({tag:"h1",text:e,size:"xl",color:u().text,bold:!0}),this.el.style.margin="0"}}class Se extends h{constructor(e){super();let t=C(1);e==="sm"?t=C(.5):e==="lg"?t=C(2):typeof e=="number"&&(t=e),this.el.style.height=`${t}px`}}class he extends h{constructor(e){super();let t=C(1);e==="sm"?t=C(.5):e==="lg"?t=C(2):typeof e=="number"&&(t=e),this.el.style.display="inline-block",this.el.style.width=`${t}px`,this.el.style.margin="0"}}var Pt="";class j extends d{constructor(e){const t=document.createElement("button");switch(t.type="button",t.classList.add("wok-ui-btn"),super(t),t.innerText=e.text,e.block&&t.classList.add("block"),e.disabled&&(t.disabled=!0),e.onClick&&(t.onclick=e.onClick),e.width&&e.width>0&&(t.style.width=`${e.width}px`),e.type){case"primary":this.setCssVars(u().primary,!!e.outline);break;case"danger":this.setCssVars(u().danger,!!e.outline);break;case"success":this.setCssVars(u().success,!!e.outline);break;case"warning":this.setCssVars(u().warning,!!e.outline);break;default:this.el.style.setProperty("--btn-bg-color","transparent"),this.el.style.setProperty("--btn-color",u().text),this.el.style.setProperty("--btn-border-color",u().border);break}t.type=e.formType||"button";const s=$();switch(e.size){case"lg":t.style.setProperty("--btn-font-size",`${s.textLg}px`);break;case"sm":t.style.setProperty("--btn-font-size",`${s.textSm}px`);break;default:t.style.setProperty("--btn-font-size",`${s.text}px`);break}}setCssVars(e,t){t?(this.el.style.setProperty("--btn-bg-color","transparent"),this.el.style.setProperty("--btn-color",e),this.el.style.setProperty("--btn-border-color",e)):(this.el.style.setProperty("--btn-bg-color",e),this.el.style.setProperty("--btn-color","white"),this.el.style.setProperty("--btn-border-color",e))}setDisabled(e){const t=this.el;return t.disabled=e,this}onClick(e){const t=this.el;return t.onclick=e,this}}var Bt="";class Te extends h{constructor(e){if(super("wok-ui-grid"),this.opts=e,typeof e.gap=="number"?this.gap={col:e.gap,row:e.gap}:e.gap?this.gap=e.gap:this.gap={col:0,row:0},!Number.isInteger(e.cols))throw new Error(`cols \u5FC5\u987B\u662F\u6574\u6570,\u5F53\u524D\u503C: ${e.cols}`);if(e.cols<1||e.cols>12)throw new Error(`cols \u8D85\u51FA\u8303\u56F4, \u6709\u6548\u8303\u56F4\u662F 1-12 ,\u5F53\u524D\u503C: ${e.cols}`);this.el.style.columnGap=`${this.gap.col}px`,this.el.style.rowGap=`${this.gap.row}px`,v(e.cells).forEach(t=>this.addCell(t))}addCell(e){this.addChild({style:{width:`calc((100% - ${this.gap.col*(this.opts.cols-1)}px) / ${this.opts.cols})`,minWidth:this.opts.cellMinWidth&&this.opts.cellMinWidth>0?`${this.opts.cellMinWidth}px`:void 0},children:e})}}class Me extends h{constructor(e){if(super("wok-ui-hbox"),this.el.style.display="flex",typeof e.gap=="number"?this.el.style.gap=`${e.gap}px ${e.gap}px`:e.gap&&(this.el.style.gap=`${e.gap.row}px ${e.gap.column}px`),e.wrap?this.el.style.flexWrap="wrap":this.el.style.flexWrap="nowrap",e.reverse?this.el.style.flexDirection="row-reverse":this.el.style.flexDirection="row",e.align)switch(e.align){case"center":this.el.style.alignItems="center";break;case"top":this.el.style.alignItems="start";break;case"bottom":this.el.style.alignItems="end";break}this.addChild(...v(e.children)),e.onClick&&(this.el.style.cursor="pointer",this.el.addEventListener("click",e.onClick))}}var Ft="";class $e extends h{constructor(e){if(super("wok-ui-justify-box"),e.align)switch(e.align){case"center":this.el.style.alignItems="center";break;case"top":this.el.style.alignItems="start";break;case"bottom":this.el.style.alignItems="end";break}this.addChild(...v(e.children)),e.onClick&&(this.el.style.cursor="pointer",this.el.addEventListener("click",e.onClick))}}var zt="";class Ie extends h{constructor(e){super("wok-ui-v-split-box"),this.el.style.height=`${e.height}px`,e.fixedSide==="top"?this.el.classList.add("fix-top"):this.el.classList.add("fix-bottom"),this.addChild(e.top,e.bottom),e.onClick&&(this.el.style.cursor="pointer",this.el.addEventListener("click",e.onClick))}}class de extends h{constructor(e){switch(super("wok-ui-h-split-box"),e.fixedSide){case"left":this.el.classList.add("fix-left");break;case"right":this.el.classList.add("fix-right");break}if(e.align)switch(e.align){case"center":this.el.style.alignItems="center";break;case"top":this.el.style.alignItems="start";break;case"bottom":this.el.style.alignItems="end";break;default:this.el.style.alignItems="stretch";break}e.gap&&e.gap>0&&(this.el.style.gap=`${e.gap}px`),this.addChild(e.left,e.right),e.onClick&&(this.el.style.cursor="pointer",this.el.addEventListener("click",e.onClick))}}var At="";class De extends h{constructor(e){if(super("wok-ui-vbox"),e.gap&&e.gap>0&&(this.el.style.gap=`${e.gap}px`),e.align)switch(e.align){case"left":this.el.style.alignItems="start";break;case"center":this.el.style.alignItems="center";break;case"right":this.el.style.alignItems="end";break;case"stretch":this.el.style.alignItems="stretch";break}this.addChild(...v(e.children)),e.onClick&&(this.el.style.cursor="pointer",this.el.addEventListener("click",e.onClick))}}var qt="";let P;function Pe(i){ce(),P=b({classNames:["wok-ui-loading"],children(e){e({classNames:["loading-spinner"],innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><path d="M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"/></svg>'}),i&&e(new oe(i))}}),P.mount(document.body)}function ce(){P&&(P.destroy(),P=void 0)}var Nt="";function Be(i){return new Promise(e=>{const t=b({classNames:"wok-ui-dialog-box",children:{classNames:["dialog-content",c.SLIDE_TOP],children:[{classNames:"dialog-body",innerText:i},{classNames:"dialog-footer",children:{innerText:o().buildMsg("confirm"),onClick(s){e(),t.destroy()}}}]}});t.mount(document.body)})}function Fe(i){return new Promise(e=>{const t=b({classNames:["wok-ui-dialog-box"],children:{classNames:["dialog-content",c.SLIDE_TOP],children:[{classNames:"dialog-body",innerText:i},{classNames:"dialog-footer",children:[{innerText:o().buildMsg("cancel"),onClick(s){e(!1),t.destroy()}},{children:new g({text:o().buildMsg("confirm"),color:u().primary}),onClick(s){e(!0),t.destroy()}}]}]}});t.mount(document.body)})}var Rt="",Vt="";class G extends h{constructor(e){super("wok-ui-svg-icon"),this.el.innerHTML=e;const t=this.el.querySelector("svg");t&&t.setAttribute("fill","currentColor")}setSize(e){return this.el.style.fontSize=`${e}px`,this}setColor(e){return this.el.style.color=e,this}}class ze extends h{constructor(e){super("wok-ui-svg-icon"),fetch(e).then(async t=>{if(t.status!==200)throw new Error(`\u8BF7\u6C42\u56FE\u6807\u5931\u8D25\uFF0C\u72B6\u6001\u7801\uFF1A${t.status}\uFF0C\u5730\u5740\uFF1A${e}`);this.el.innerHTML=await t.text();const s=this.el.querySelector("svg");s&&s.setAttribute("fill","currentColor")}).catch(console.error)}setSize(e){return this.el.style.fontSize=`${e}px`,this}setColor(e){return this.el.style.color=e,this}}class Ae extends G{constructor(){super('<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"/></svg>'),this.setColor(u().success)}}class qe extends G{constructor(){super('<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-384c13.3 0 24 10.7 24 24V264c0 13.3-10.7 24-24 24s-24-10.7-24-24V152c0-13.3 10.7-24 24-24zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"/></svg>'),this.setColor(u().warning)}}class Ne extends h{constructor(){super("wok-ui-oven")}addChild(...e){super.addChild(...e)}}class Re extends h{constructor(e){switch(super("wok-ui-toast",c.SLIDE_TOP),e.type){case"success":this.addChild(new Ae);break;case"warning":this.addChild(new qe);break}this.addChild(new he(8),new g(e.text)),setTimeout(()=>{this.destroy()},e.duration)}destroy(){f({el:this.el,animation:c.FADE,reverse:!0,duration:300}).then(()=>{super.destroy()}).catch(console.error)}}let R;function J(i){let e=3e3;i.duration&&i.duration>0&&(e=i.duration),R||(R=new Ne,R.mount(document.body)),R.addChild(new Re({type:i.type,text:i.text,duration:e}))}function p(i){let e="";typeof i=="string"?e=i:i instanceof Error?(e=i.message,console.error(i)):e=JSON.stringify(i),J({type:"warning",text:e})}function Ve(i){J({type:"success",text:i})}var Ht="";class He extends h{constructor(e){super("wok-ui-modal"),this.opts=e}addDialog(e){e.onDestroy(()=>{this.getChildren().length===0&&this.destroy()}),this.addChild(e)}async closeAllModals(){const e=this.getChildren();for(const t of e)await t.close()}removeChild(e){const t=super.removeChild(e);return this.getChildren().length===0&&this.destroy(),t}destroy(){super.destroy(),this.opts.onDestroy()}}class Ue extends h{constructor(e){if(super("wok-ui-modal-dialog",q),this.opts=e,this.callbacked=!1,f({el:this.el,animation:c.SLIDE_TOP,duration:300}).then(()=>{e.onShown&&e.onShown()}),this.opts.fullscreen?this.el.classList.add("fullscreen"):this.opts.dialogCentered&&this.el.classList.add("centered"),this.el.addEventListener("click",t=>{t.stopPropagation(),this.tryDestroy()}),e.replaceByBody){this.addChild({classNames:["wok-ui-modal-content"],style:{borderRadius:e.borderRadius&&e.borderRadius>0?`${e.borderRadius}px`:void 0,width:e.fullscreen?void 0:e.width&&e.width>0?`${e.width}px`:"500px"},onClick(t){t.stopPropagation()},children:e.body});return}this.addChild({classNames:["wok-ui-modal-content","normal"],style:{borderRadius:e.borderRadius&&e.borderRadius>0?`${e.borderRadius}px`:void 0,width:e.fullscreen?void 0:e.width&&e.width>0?`${e.width}px`:"500px"},onClick(t){t.stopPropagation()},children:t=>{if(e.title&&t({classNames:["wok-ui-modal-header"],children:s=>{s({classNames:["title"],innerText:e.title}),e.closeBtn!==!1&&s({classNames:["close"],innerHTML:"&times;",onClick:()=>{this.close().catch(p)}})}}),t({classNames:["wok-ui-modal-body"],children:e.body}),e.footer)t(e.footer);else if(e.buttons&&(e.buttons.cancel||e.buttons.confirm)){const{confirm:s,cancel:n}=e.buttons;t({classNames:["wok-ui-modal-footer"],children:l=>{s&&l(new j({text:typeof s=="string"?s:o().buildMsg("confirm"),type:"primary",onClick(a){e.onConfirm&&e.onConfirm()}})),n&&l(new j({text:typeof n=="string"?n:o().buildMsg("cancel"),onClick:a=>this.close().catch(p)}))}})}}})}tryDestroy(){if(this.opts.staticBackDrop){f({el:this.el,animation:c.SHAKE}).catch(p);return}this.close().catch(p)}onDestroy(e){this.destroyListener=e}async close(){await f({el:this.el,animation:c.SLIDE_TOP,duration:300,reverse:!0}),this.destroy(),this.destroyListener&&this.destroyListener(),this.opts.onClose&&!this.callbacked&&(this.opts.onClose(),this.callbacked=!0)}}let k;function We(i){k||(k=new He({onDestroy:()=>k=void 0}),k.mount(document.body));const e=new Ue(i);return k.addDialog(e),{close:()=>e.close()}}async function je(){k&&await k.closeAllModals()}var Ut="";class Ge extends h{constructor(e){super("wok-ui-drawer"),this.opts=e,this.el.addEventListener("click",()=>{const t=this.getChildren();t.length&&t[t.length-1].destroy()})}addContent(e){e.onDestroy(()=>{this.getChildren().length===0&&this.destroy()}),this.addChild(e)}destroy(){super.destroy(),this.opts.onDestroy()}}class Je extends h{constructor(e){if(super("wok-ui-drawer-content",q),this.opts=e,this.callbacked=!1,this.leaveAnimating=!1,this.el.addEventListener("click",t=>t.stopPropagation()),e.placement==="left"?this.el.classList.add("left"):e.placement==="top"?this.el.classList.add("top"):e.placement==="bottom"?this.el.classList.add("bottom"):this.el.classList.add("right"),this.enter().catch(p),e.replaceByBody){this.addChild(...v(e.body));return}e.title&&this.addChild({classNames:["header"],children:[{classNames:["title"],innerText:e.title},{classNames:["close"],innerHTML:"&times;",onClick:()=>this.destroy()}]}),this.addChild({classNames:["body"],children:e.body})}enter(){return this.opts.placement==="left"?f({el:this.el,animation:c.SLIDE_LEFT}):this.opts.placement==="top"?f({el:this.el,animation:c.SLIDE_TOP}):this.opts.placement==="bottom"?f({el:this.el,animation:c.SLIDE_BOTTOM}):f({el:this.el,animation:c.SLIDE_RIGHT})}async leave(){this.leaveAnimating=!0;try{this.opts.placement==="left"?await f({el:this.el,animation:c.SLIDE_LEFT,reverse:!0}):this.opts.placement==="top"?await f({el:this.el,animation:c.SLIDE_TOP,reverse:!0}):this.opts.placement==="bottom"?await f({el:this.el,animation:c.SLIDE_BOTTOM,reverse:!0}):await f({el:this.el,animation:c.SLIDE_RIGHT,reverse:!0})}finally{this.leaveAnimating=!1}}onDestroy(e){this.destroyListener=e}destroy(){this.leaveAnimating||this.leave().then(()=>{super.destroy(),this.destroyListener&&this.destroyListener(),this.opts.onClose&&!this.callbacked&&(this.opts.onClose(),this.callbacked=!0)})}}let B;function Ye(i){B||(B=new Ge({onDestroy:()=>B=void 0}),B.mount(document.body));const e=new Je(i);return B.addContent(e),{close:()=>e.destroy()}}var Wt="";class Ke extends d{constructor(e){super(document.createElement("tr")),e.cols.forEach(t=>{this.addChild(new Qe({data:e.data,col:t,rowIdx:e.rowIdx}))})}}class Qe extends d{constructor(e){super(document.createElement("td"));const t=e.col.setting.content(e.data,e.rowIdx);this.addChild(t)}}class Xe extends d{constructor(e){super(document.createElement("tbody")),this.addChild(...e.list.map((t,s)=>new Ke({data:t,cols:e.cols,rowIdx:s})))}}class Ze extends d{constructor(e){super(document.createElement("thead")),this.addChild({tag:"tr",children:e.cols.map(t=>{const s=t.setting.width&&t.setting.width>0?t.setting.width:80;return new Oe(t.setting.name,s)})})}}class Oe extends d{constructor(e,t){if(super(document.createElement("th")),this.el.style.width=`${t}px`,typeof e=="string"){this.el.innerText=e;return}this.addChild(e)}}class et extends h{constructor(e){super("kk-table"),e.bordered&&this.el.classList.add("bordered"),this.addChild({tag:"table",children:[new Ze({cols:e.cols}),new Xe({table:this,list:e.list,cols:e.cols})]})}}class w extends d{}class tt extends d{constructor(e){const t=document.createElement("form");t.noValidate=!0,t.autocomplete=e.autocomplete?"on":"off",super(t),this.opts=e,this.addChild(...v(e.children)),t.addEventListener("submit",s=>{s.preventDefault(),this.submit()})}submit(){if(!this.opts.onSubmit)return;const e=this.find(t=>t instanceof w).filter(t=>!t.validate());if(e.length){e[0].scrollIntoViewIfInvisible();return}this.opts.onSubmit()}}class m extends h{constructor(e){super(),this.el.classList.add("invalid-feedback"),this.el.innerText=e,this.el.style.paddingTop="0.5rem",this.el.style.lineHeight="1",this.el.style.color=u().danger}}var jt="";class L extends d{constructor(e){const t=document.createElement("input");if(t.type="checkbox",t.classList.add("wok-ui-checkbox"),super(t),t.value=e.value,this.value=e.value,this.__input=t,e.disabled&&(t.disabled=e.disabled),this.setStatus(e.status||"unchecked"),e.onChange){const{onChange:s}=e;this.el.addEventListener("change",n=>{n.stopPropagation(),s(this.getStatus())})}}setStatus(e){if(e!==this.getStatus())switch(e){case"checked":this.__input.checked=!0,this.__input.indeterminate=!1;break;case"unchecked":this.__input.checked=!1,this.__input.indeterminate=!1;break;case"indeterminate":this.__input.checked=!1,this.__input.indeterminate=!0;break}}getStatus(){return this.__input.checked?"checked":this.__input.indeterminate?"indeterminate":"unchecked"}isChecked(){return this.__input.checked}setDisabled(e){this.__input.disabled=e}}var Gt="";class it extends w{constructor(e){super(document.createElement("div")),this.opts=e,this.__values=[],this.__disabled=!1,this.el.classList.add("wok-ui-checkbox-group"),e.inline&&this.el.classList.add("inline"),e.value&&(this.__values=[...e.value]),e.disabled&&(this.__disabled=!0),this.addChild(...e.options.map(t=>b({tag:"label",classNames:["item"],children:[new L({value:t.value,status:this.__values.includes(t.value)?"checked":"unchecked",disabled:this.__disabled,onChange:s=>{if(s==="checked")this.__values.includes(t.value)||(this.__values.push(t.value),this.handleChange());else{const n=this.__values.indexOf(t.value);n!==-1&&(this.__values.splice(n,1),this.handleChange())}}}),new g(t.label)]})))}handleChange(){this.opts.onChange&&this.opts.onChange(this.__values),this.validate()}__validate(){if(!this.__values.length)return this.opts.required?{valid:!1,msg:typeof this.opts.required=="string"?this.opts.required:o().buildMsg("form-err-must-check")}:{valid:!0};if(typeof this.opts.minSelected=="number"){if(this.__values.length<this.opts.minSelected)return{valid:!1,msg:o().buildMsg("form-err-min-select",`${this.opts.minSelected}`)}}else if(this.opts.minSelected&&this.__values.length<this.opts.minSelected.minSelected)return{valid:!1,msg:this.opts.minSelected.errMsg};if(typeof this.opts.maxSelected=="number"){if(this.__values.length>this.opts.maxSelected)return{valid:!1,msg:o().buildMsg("form-err-max-select",`${this.opts.maxSelected}`)}}else if(this.opts.maxSelected&&this.__values.length>this.opts.maxSelected.maxSelected)return{valid:!1,msg:this.opts.maxSelected.errMsg};return{valid:!0}}validate(){const e=this.__validate();return this.getChildren().filter(t=>t instanceof m).forEach(t=>t.destroy()),e.valid||this.addChild(new m(e.msg)),e.valid}setDisabled(e){this.__disabled!==e&&(this.__disabled=e,this.find(t=>t instanceof L).map(t=>t).forEach(t=>t.setDisabled(this.__disabled)))}}var Jt="";class st extends w{constructor(e){super(document.createElement("label")),this.opts=e,this.__value=!1,this.__disabled=!1,e.value&&(this.__value=e.value),this.addChild({classNames:["wok-ui-bool-checkbox"],children:[new L({value:"",status:this.__value?"checked":"unchecked",disabled:this.__disabled,onChange:t=>{this.__value=t==="checked",this.opts.onChange&&this.opts.onChange(this.__value),this.validate()}}),new g(e.label)]})}__validate(){return this.opts.required&&!this.__value?{valid:!1,msg:typeof this.opts.required=="string"?this.opts.required:o().buildMsg("form-err-must-check")}:{valid:!0}}validate(){const e=this.__validate();return this.getChildren().filter(t=>t instanceof m).forEach(t=>t.destroy()),e.valid||this.addChild(new m(e.msg)),e.valid}setDisabled(e){this.__disabled!==e&&(this.__disabled=e,this.find(t=>t instanceof L).map(t=>t).forEach(t=>t.setDisabled(this.__disabled)))}}function nt(){const i=new Date().getTime(),e=Math.floor(Math.random()*1e8);return`${i.toString(36)}${e.toString(36)}`}var Yt="";class Y extends d{constructor(e){const t=document.createElement("input");t.type="radio",t.name=e.name,t.value=e.value,t.classList.add("wok-ui-radio"),super(t),this.input=t,e.checked&&(t.checked=!0),e.disabled&&(t.disabled=!0),e.onChecked&&(t.onchange=()=>{t.checked&&e.onChecked&&e.onChecked()})}isChecked(){return this.input.checked}setChecked(e){this.input.checked!==e&&(this.input.checked=e)}getValue(){return this.input.value}setDisabled(e){this.input.disabled=e}}var Kt="";class rt extends w{constructor(e){super(document.createElement("div")),this.opts=e,this.value="",this.el.classList.add("wok-ui-radio-group"),this.name=nt(),e.inline&&this.el.classList.add("inline"),this.addChild(...e.options.map(t=>b({tag:"label",children:[new Y({name:this.name,value:t.value,checked:e.value===t.value,disabled:e.disabled,onChecked:()=>{this.value=t.value,this.opts.onChange&&this.opts.onChange(this.value),this.validate()}}),new g(t.label)]})))}__validate(){return this.value?{valid:!0}:this.opts.required?{valid:!1,msg:typeof this.opts.required=="string"?this.opts.required:o().buildMsg("form-err-must-check")}:{valid:!0}}validate(){const e=this.__validate();return this.getChildren().filter(t=>t instanceof m).forEach(t=>t.destroy()),e.valid||this.addChild(new m(e.msg)),e.valid}setDisabled(e){this.find(t=>t instanceof Y).map(t=>t).forEach(t=>t.setDisabled(e))}}var Qt="";class E extends w{constructor(e){super(document.createElement("div")),this.opts=e,this.composing=!1,this.opts=e,this.input=document.createElement("input"),this.input.type="text",this.input.classList.add("wok-ui-input");const t=$();switch(e.size){case"lg":this.input.style.setProperty("--input-font-size",`${t.textLg}px`);break;case"sm":this.input.style.setProperty("--input-font-size",`${t.textSm}px`);break;default:this.input.style.setProperty("--input-font-size",`${t.text}px`);break}this.addChild(this.input),this.input.placeholder=e.placeholder||"",typeof e.minLength=="number"?this.input.minLength=e.minLength:e.minLength&&(this.input.minLength=e.minLength.minLength),typeof e.maxLength=="number"?this.input.maxLength=e.maxLength:e.maxLength&&(this.input.maxLength=e.maxLength.maxLength),e.required&&(this.input.required=!0),e.value&&(this.input.value=e.value),e.disabled&&(this.input.disabled=!0),this.input.addEventListener("compositionstart",()=>this.composing=!0),this.input.addEventListener("compositionend",()=>{this.composing=!1,this.handleChange()}),this.input.addEventListener("input",()=>{this.composing||this.handleChange()}),e.onBlur&&this.input.addEventListener("blur",e.onBlur)}mount(e){super.mount(e),this.opts.autofocus&&setTimeout(()=>this.input.focus(),0)}focus(){this.input.focus()}handleChange(){this.opts.onChange&&this.opts.onChange(this.input.value),this.validate()}__validate(e){if(this.opts.required&&!e)return{valid:!1,msg:typeof this.opts.required=="string"?this.opts.required:o().buildMsg("form-err-required")};if(!e)return{valid:!0};if(typeof this.opts.minLength=="number"){if(e.length<this.opts.minLength)return{valid:!1,msg:o().buildMsg("form-err-min-length",`${this.opts.minLength}`)}}else if(this.opts.minLength&&e.length<this.opts.minLength.minLength)return{valid:!1,msg:this.opts.minLength.errMsg};if(typeof this.opts.maxLength=="number"){if(e.length>this.opts.maxLength)return{valid:!1,msg:o().buildMsg("form-err-max-length",`${this.opts.maxLength}`)}}else if(this.opts.maxLength&&e.length>this.opts.maxLength.maxLength)return{valid:!1,msg:this.opts.maxLength.errMsg};return this.opts.validator?this.opts.validator(e):{valid:!0}}validate(){const e=this.__validate(this.input.value);return this.getChildren().filter(t=>t instanceof m).forEach(t=>t.destroy()),e.valid?this.input.classList.remove("invalid"):(this.input.classList.add("invalid"),this.addChild(new m(e.msg))),e.valid}setDisabled(e){this.input.disabled=e}}class lt extends E{constructor(e){super(e),this.input.type="tel"}}class at extends E{constructor(e){super(e),this.input.type="search"}}class ot extends E{constructor(e){super(e),this.input.type="password"}}function S(i){const e=i.getFullYear(),t=i.getMonth()+1,s=i.getDate(),n=`${t}`.padStart(2,"0"),l=`${s}`.padStart(2,"0");return`${e}-${n}-${l}`}function ue(i){const e=new Date(i);return isNaN(e.getTime())?void 0:e}class ht extends E{constructor(e){super({required:e.required,value:e.value?S(e.value):void 0,disabled:e.disabled,placeholder:e.placeholder,size:e.size,validator(t){const s=ue(t);if(!s)return e.required?{valid:!1,msg:typeof e.required=="string"?e.required:o().buildMsg("form-err-required")}:{valid:!0};if(e.min instanceof Date){if(s.getTime()<e.min.getTime())return{valid:!1,msg:o().buildMsg("form-err-min",`${S(e.min)}`)}}else if(e.min&&s.getTime()<e.min.min.getTime())return{valid:!1,msg:e.min.errMsg};if(e.max instanceof Date){if(s.getTime()>e.max.getTime())return{valid:!1,msg:o().buildMsg("form-err-max",`${S(e.max)}`)}}else if(e.max&&s.getTime()>e.max.max.getTime())return{valid:!1,msg:e.max.errMsg};return{valid:!0}},onChange(t){if(!!e.onChange){if(!t){e.onChange(void 0);return}e.onChange(ue(t))}},onBlur:e.onBlur}),this.input.type="date",e.min instanceof Date?this.input.min=S(e.min):e.min&&(this.input.min=S(e.min.min)),e.max instanceof Date?this.input.max=S(e.max):e.max&&(this.input.max=S(e.max.max))}}var Xt="";class dt extends E{constructor(e){super(e),this.input.type="color"}}class ct extends E{constructor(e){super({required:e.required,placeholder:e.placeholder,value:typeof e.value=="number"?`${e.value}`:void 0,disabled:e.disabled,size:e.size,validator(t){if(!t)return e.required?{valid:!1,msg:typeof e.required=="string"?e.required:o().buildMsg("form-err-required")}:{valid:!0};const s=parseFloat(t);if(isNaN(s))return{valid:!1,msg:o().buildMsg("form-err-number")};if(typeof e.max=="number"){if(s>e.max)return{valid:!1,msg:o().buildMsg("form-err-max",`${e.max}`)}}else if(e.max&&s>e.max.max)return{valid:!1,msg:e.max.errMsg};if(typeof e.min=="number"){if(s<e.min)return{valid:!1,msg:o().buildMsg("form-err-min",`${e.min}`)}}else if(e.min&&s<e.min.min)return{valid:!1,msg:e.min.errMsg};return e.validator?e.validator(s):{valid:!0}},onChange(t){e.onChange&&(t?e.onChange(parseFloat(t)):e.onChange(void 0))},onBlur:e.onBlur}),this.input.type="number",typeof e.max=="number"?this.input.max=`${e.max}`:e.max&&(this.input.max=`${e.max.max}`),typeof e.min=="number"?this.input.min=`${e.min}`:e.min&&(this.input.min=`${e.min.min}`)}}class ut extends w{constructor(e){super(document.createElement("div")),this.textAreaopts=e,this.composing=!1,this.textareaEl=document.createElement("textarea"),this.textareaEl.classList.add("wok-ui-input");const t=$();switch(e.size){case"lg":this.textareaEl.style.setProperty("--input-font-size",`${t.textLg}px`);break;case"sm":this.textareaEl.style.setProperty("--input-font-size",`${t.textSm}px`);break;default:this.textareaEl.style.setProperty("--input-font-size",`${t.text}px`);break}if(this.addChild(this.textareaEl),this.textareaEl.rows=e.rows&&e.rows>0?e.rows:3,typeof e.minLength=="number"?this.textareaEl.minLength=e.minLength:e.minLength&&(this.textareaEl.minLength=e.minLength.minLength),typeof e.maxLength=="number"?this.textareaEl.maxLength=e.maxLength:e.maxLength&&(this.textareaEl.maxLength=e.maxLength.maxLength),e.required&&(this.textareaEl.required=!0),e.value&&(this.textareaEl.value=e.value),e.disabled&&(this.textareaEl.disabled=!0),e.placeholder&&(this.textareaEl.placeholder=e.placeholder),this.textareaEl.addEventListener("compositionstart",()=>this.composing=!0),this.textareaEl.addEventListener("compositionend",()=>{this.composing=!1,this.handleChange()}),this.textareaEl.addEventListener("input",()=>{this.composing||this.handleChange()}),e.onBlur){const{onBlur:s}=e;this.textareaEl.addEventListener("blur",()=>s())}}handleChange(){this.textAreaopts.onChange&&this.textAreaopts.onChange(this.textareaEl.value),this.validate()}__validate(e){if(this.textAreaopts.required&&!e)return{valid:!1,msg:typeof this.textAreaopts.required=="string"?this.textAreaopts.required:o().buildMsg("form-err-required")};if(!e)return{valid:!0};if(typeof this.textAreaopts.minLength=="number"){if(e.length<this.textAreaopts.minLength)return{valid:!1,msg:o().buildMsg("form-err-min-length",`${this.textAreaopts.minLength}`)}}else if(this.textAreaopts.minLength&&e.length<this.textAreaopts.minLength.minLength)return{valid:!1,msg:this.textAreaopts.minLength.errMsg};if(typeof this.textAreaopts.maxLength=="number"){if(e.length>this.textAreaopts.maxLength)return{valid:!1,msg:o().buildMsg("form-err-max-length",`${this.textAreaopts.maxLength}`)}}else if(this.textAreaopts.maxLength&&e.length>this.textAreaopts.maxLength.maxLength)return{valid:!1,msg:this.textAreaopts.maxLength.errMsg};return this.textAreaopts.validator?this.textAreaopts.validator(e):{valid:!0}}validate(){const e=this.__validate(this.textareaEl.value);return this.getChildren().filter(t=>t instanceof m).forEach(t=>t.destroy()),e.valid?this.textareaEl.classList.remove("invalid"):(this.textareaEl.classList.add("invalid"),this.addChild(new m(e.msg))),e.valid}setDisabled(e){this.textareaEl.disabled=e}}var Zt="";class ft extends w{constructor(e){super(document.createElement("div")),this.opts=e,this.addChild({tag:"select",classNames:["wok-ui-select"],postHandle:s=>{this.select=s,e.value&&(this.select.value=e.value),this.select.addEventListener("change",n=>{this.opts.onChange&&this.opts.onChange(this.select.value),this.validate()})},children:e.options.map(s=>({tag:"option",innerText:s.label,attrs:{value:s.value}}))});const t=$();switch(e.size){case"lg":this.select.style.setProperty("--select-font-size",`${t.textLg}px`);break;case"sm":this.select.style.setProperty("--select-font-size",`${t.textSm}px`);break;default:this.select.style.setProperty("--select-font-size",`${t.text}px`);break}}__validate(e){return this.opts.required&&!e?{valid:!1,msg:typeof this.opts.required=="string"?this.opts.required:o().buildMsg("form-err-required")}:{valid:!0}}validate(){const e=this.__validate(this.select.value);return this.getChildren().filter(t=>t instanceof m).forEach(t=>t.destroy()),e.valid?this.select.classList.remove("invalid"):(this.select.classList.add("invalid"),this.addChild(new m(e.msg))),e.valid}setDisabled(e){this.select.disabled=e}}var Ot="";class mt extends w{constructor(e){if(super(document.createElement("div")),this.input=document.createElement("input"),this.input.classList.add("wok-ui-range"),this.input.type="range",this.input.min=`${e.min}`,this.input.max=`${e.max}`,typeof e.step=="number"?this.input.step=`${e.step}`:this.input.step="1",this.input.value=`${e.value}`,!e.showValue){this.addChild(this.input),this.input.addEventListener("change",()=>{this.input.title=this.input.value,e.onChange&&e.onChange(parseInt(this.input.value))});return}const t=e.showValue?new g(`${e.value}`):void 0;this.input.addEventListener("change",()=>{this.input.title=this.input.value,t&&t.setText(this.input.value),e.onChange&&e.onChange(parseInt(this.input.value))}),t?this.addChild(new de({left:this.input,right:t,gap:C(.5),fixedSide:"right"})):this.addChild(this.input)}validate(){return!0}setDisabled(e){this.input.disabled=e}}class K{constructor(e){this.setting=e}}class gt extends K{constructor(e){let t;e.name||(t=new L({status:"unchecked",onChange:s=>{!t||(t.isChecked()?this.boxes.forEach(n=>n.setStatus("checked")):this.boxes.forEach(n=>n.setStatus("unchecked")),e.onChange&&e.onChange(this.getCheckedValues()))},value:""})),super({name:e.name||t||"",content:(s,n)=>{const l=e.value(s,n),a=e.checked?e.checked(s,n):!1,y=new L({status:a?"checked":"unchecked",value:l,onChange:()=>{const z=this.getCheckedValues();e.onChange&&e.onChange(z),this.updateCheckAllBox()}});return this.boxes.push(y),y},width:30}),this.boxes=[],this.checkAllBox=t}updateCheckAllBox(){if(!this.checkAllBox)return;const e=this.getCheckedValues();e.length===this.boxes.length?this.checkAllBox.setStatus("checked"):e.length===0?this.checkAllBox.setStatus("unchecked"):this.checkAllBox.setStatus("indeterminate")}getCheckedValues(){return this.boxes.filter(e=>e.isChecked()).map(e=>e.value)}checkAll(){this.checkAllBox&&this.checkAllBox.setStatus("checked"),this.boxes.forEach(e=>e.setStatus("checked"))}uncheckAll(){this.checkAllBox&&this.checkAllBox.setStatus("unchecked"),this.boxes.forEach(e=>e.setStatus("unchecked"))}}class yt extends K{constructor(){super({name:"#",content:(e,t)=>`${t+1}`,width:30})}}function fe(i){const e={};return i.split("&").forEach(s=>{if(!s)return;const n=s.split("=");if(n.length!==2)return;const l=decodeURIComponent(n[0]),a=decodeURIComponent(n[1]);if(!e[l]){e[l]=a;return}const y=e[l];if(typeof y=="string"){e[l]=[y,a];return}y.push(a)}),e}function Q(i){const e=[];for(const t in i){const s=i[t];if(typeof s=="string"){e.push(`${encodeURIComponent(t)}=${encodeURIComponent(s)}`);continue}s.forEach(n=>{e.push(`${encodeURIComponent(t)}=${encodeURIComponent(n)}`)})}return e.join("&")}function X(i){return i.split("/").filter(t=>!!t).map(t=>{if(t.startsWith(":")){const s=t.substring(1);return{type:"variable",varName:s}}return{type:"constant",value:t}})}function pt(i,e){const t=i.split("/").filter(n=>!!n);if(t.length!==e.length)return{matched:!1};const s={};for(let n=0;n<t.length;n++){const l=e[n],a=t[n];if(l.type==="constant"){if(l.value!==a)return{matched:!1};continue}l.varName&&(s[l.varName]=a)}return{matched:!0,vars:s}}function vt(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;t++){const s=i[t],n=e[t];if(s.type!==n.type||s.type==="constant"&&s.value!==n.value)return!1}return!0}class F extends h{constructor(e,t){super(),this.key=e,this.scrollTop=0,this.title="",this.addChild(t)}cacheScrollTop(){this.scrollTop=window.scrollY}hide(){this.el.style.display="none",this.title=document.title,this.find(()=>!0).forEach(e=>{const t=e;t.onPageHide&&t.onPageHide()})}show(){this.el.style.display="block",this.title&&(document.title=this.title),this.scrollTop&&setTimeout(()=>{window.scrollTo({top:this.scrollTop,behavior:"instant"})},0),this.find(()=>!0).forEach(e=>{const t=e;t.onPageShow&&t.onPageShow()})}}class Z extends d{constructor(e){super(document.createElement("div")),this.paths=[],this.currentPath="",this.pathVars={},this.query={},this.cacheLimit=10,e.cacheLimit&&e.cacheLimit>=1&&(this.cacheLimit=e.cacheLimit),e.rules.flatMap(t=>{if(!t.alias)return[{pathRule:t.path,module:t.module,parts:X(t.path),cache:!!t.cache}];const s=t.alias.map(n=>({pathRule:n,module:t.module,parts:X(n),cache:!!t.cache}));return[{pathRule:t.path,module:t.module,parts:X(t.path),cache:!!t.cache},...s]}).forEach(t=>{if(t.pathRule==="*"){if(this.defaultPathInfo)throw new Error("\u9ED8\u8BA4\u8DEF\u5F84\u91CD\u590D\uFF0C\u914D\u7F6E\u4E86\u591A\u4E2A\u8DEF\u5F84\u4E3A * \u7684\u8DEF\u7531");this.defaultPathInfo=t;return}const s=this.paths.find(n=>vt(n.parts,t.parts));if(s)throw new Error(`\u8DEF\u5F84\u89C4\u5219\u91CD\u590D\uFF1A${t.pathRule} \uFF0C${s.pathRule}`);this.paths.push(t)}),this.scrollListener=()=>{this.currentModule&&this.currentModule instanceof F&&this.currentModule.cacheScrollTop()},window.addEventListener("scroll",this.scrollListener)}handleUrl(){const e=this.parseCurrentUrl();this.currentPath=e.path,this.query=e.query||{};const t=this.paths.find(s=>{const n=pt(this.currentPath,s.parts);return n.matched?(this.pathVars=n.vars||{},!0):!1});if(this.currentModule&&(this.currentModule instanceof F?this.currentModule.hide():this.currentModule.destroy()),!t)this.defaultPathInfo?this.handleModule(this.defaultPathInfo.module).then(s=>{this.addChild(s),this.currentModule=s}).catch(p):p("\u8DEF\u5F84\u672A\u8BBE\u7F6E\uFF1A"+this.currentPath);else if(t.cache){const s=JSON.stringify(e),n=this.getChildren().filter(l=>l instanceof F).map(l=>l).find(l=>l.key===s);if(n){n.show(),this.currentModule=n;return}this.handleModule(t.module).then(l=>{const a=new F(s,l);this.addChild(a),this.currentModule=a;const y=this.getChildren().filter(z=>z instanceof F).map(z=>z);y.length>this.cacheLimit&&this.removeChild(y[0])}).catch(p)}else this.handleModule(t.module).then(s=>{this.addChild(s),this.currentModule=s}).catch(p)}async handleModule(e){return e()}getRouterInfo(){return{path:this.currentPath,query:this.query}}getParam(e){const t=this.query[e];return t?typeof t=="string"?t:t[0]||"":""}getParamVals(e){const t=this.query[e];return typeof t=="string"?[t]:t}getPathVar(e){return this.pathVars[e]||""}destroy(){window.removeEventListener("scroll",this.scrollListener),super.destroy()}}class bt extends Z{constructor(e,t){super({rules:e,cacheLimit:t}),this.listener=()=>this.handleUrl(),window.addEventListener("hashchange",this.listener),setTimeout(()=>this.handleUrl(),0)}parseCurrentUrl(){let{hash:e}=location;e.startsWith("#")&&(e=e.substring(1));const t=e.indexOf("?");let s=e;t!==-1&&(s=e.substring(0,t));let n={};return t!==-1&&(n=fe(e.substring(t+1))),{path:s,query:n}}buildUrl(e){const{href:t}=location,s=t.indexOf("#"),n=s===-1?t:t.substring(0,s);if(typeof e=="string")return`${n}#${e}`;const l=Q(e.query),a=`${e.path}?${l}`;return`${n}#${a}`}push(e){if(typeof e=="string"){location.hash=e;return}const t=Q(e.query);location.hash=`${e.path}?${t}`}replace(e){location.replace(this.buildUrl(e))}destroy(){window.removeEventListener("hashchange",this.listener),super.destroy()}}class xt extends Z{constructor(e){super({rules:e.rules,cacheLimit:e.cacheLimit}),this.base=e.base;const{pathname:t}=location;if(this.base&&!t.startsWith(this.base))throw new Error("\u65E0\u6CD5\u521B\u5EFA\u8DEF\u7531\uFF0C\u5F53\u524D\u8DEF\u5F84\u4E0D\u5728\u8BBE\u5B9A\u7684 base \u4E0B");this.listener=()=>this.handleUrl(),window.addEventListener("popstate",this.listener),setTimeout(()=>this.handleUrl(),0)}parseCurrentUrl(){const{href:e,origin:t}=location;let s=e.substring(t.length);const n=s.indexOf("#");n!==-1&&(s=s.substring(0,n));let l;const a=s.indexOf("?");if(a!==-1){const y=s.substring(a+1);s=s.substring(0,a),l=fe(y)}return{path:s,query:l}}buildUrl(e){if(typeof e=="string")return this.buildUrl({path:e,query:{}});let t=e.path;return t.startsWith("/")||(t=`/${t}`),this.base&&(t=`${this.base}${t}`),t.startsWith("/")||(t=`/${t}`),e.query&&(t=`${t}?${Q(e.query)}`),`${location.origin}${t}`}push(e){history.pushState({},"",this.buildUrl(e))}replace(e){history.replaceState({},"",this.buildUrl(e))}destroy(){window.removeEventListener("popstate",this.listener)}}var ei="";class me extends d{constructor(e){const t=document.createElement("a");super(t),t.classList.add("wok-ui-link"),typeof e.content=="string"?t.innerText=e.content:Array.isArray(e.content)?this.addChild(...e.content):this.addChild(e.content),e.url?t.href=e.url:e.onClick&&(t.href="javascript:;"),e.target&&(t.target=`_${e.target}`),e.download&&(t.download=e.download),e.onClick&&t.addEventListener("click",s=>{s.preventDefault(),e.onClick&&e.onClick(s)})}triggerClick(){return this.el.click(),this}}class wt extends me{constructor(e){const t=ge(),s=t.buildUrl(e.query?{path:e.path,query:e.query}:e.path);super({content:e.content,url:s,onClick(n){n.stopPropagation(),n.stopPropagation(),e.replace?e.query?t.replace({path:e.path,query:e.query}):t.replace(e.path):e.query?t.push({path:e.path,query:e.query}):t.push(e.path)}})}}let T;function Ct(i){return T||(i.mode==="hash"?T=new bt(i.rules,i.cacheLimit):T=new xt({rules:i.rules,cacheLimit:i.cacheLimit,base:i.base}),T)}function ge(){if(!T)throw new Error("\u8DEF\u7531\u5C1A\u672A\u521D\u59CB\u5316");return T}var ti="";class ye extends h{constructor(e){super("wok-ui-dropdown"),this.el.addEventListener("click",s=>{this.el.classList.contains("open")?this.close():(this.el.classList.add("open"),setTimeout(()=>this.addCloseListener(),0))}),this.addChild(...v(e.content));const t=e.menusAlign||"left";Array.isArray(e.menus)?this.addChild({classNames:["wok-ui-dropdown-menu",t],onClick(s){s.stopPropagation()},children:e.menus.map(s=>s.label?b({classNames:["wok-ui-dropdown-item",s.disabled?"disabled":""],innerText:s.label,onClick:n=>{s.disabled||(this.close(),s.callback&&s.callback())}}):b(s))}):this.addChild({classNames:["wok-ui-dropdown-menu",t],onClick(s){s.stopPropagation()},children:e.menus})}addCloseListener(){const e=n=>{n.stopPropagation();const l=n.target;this.el.contains(l)||this.el.classList.contains("open")&&this.close()};let t=this.el.parentElement,s=[];for(;t;)s.push(t),t.addEventListener("click",e),t=t.parentElement;this.__removeCloseListener=()=>s.forEach(n=>n.removeEventListener("click",e))}close(){if(this.el.classList.remove("open"),this.__removeCloseListener){this.__removeCloseListener(),this.__removeCloseListener=void 0;return}}destroy(){this.__removeCloseListener&&this.__removeCloseListener(),super.destroy()}}class _t extends ye{constructor(e){super(e),this.el.classList.add("dropup")}}r.ANIMATION_PROVISION=q,r.Animation=c,r.BoolCheckbox=st,r.Button=j,r.Checkbox=L,r.CheckboxGroup=it,r.ColorInput=dt,r.DateInput=ht,r.DivModule=h,r.Dropdown=ye,r.Dropup=_t,r.ExtensibleI18n=O,r.Form=tt,r.FormInput=w,r.FullRenderingModule=be,r.Grid=Te,r.HBox=Me,r.HSpacer=he,r.HSplitBox=de,r.I18n=H,r.InvalidFeedback=m,r.JustifyBox=$e,r.LargeTitle=Ee,r.Link=me,r.Module=d,r.NumberInput=ct,r.PasswordInput=ot,r.PrimaryBodyText=oe,r.Radio=Y,r.RadioGroup=rt,r.Range=mt,r.RemoteSvgIcon=ze,r.ResponsiveBreakPoint=ie,r.ResponsiveModule=xe,r.Router=Z,r.RouterLink=wt,r.SearchInput=at,r.SecondaryBodyText=_e,r.Select=ft,r.SmallSecondaryBodyText=ke,r.Spacer=Se,r.SvgIcon=G,r.Table=et,r.TableCheckboxColumn=gt,r.TableColumn=K,r.TableIndexColumn=yt,r.TelInput=lt,r.Text=g,r.TextArea=ut,r.TextInput=E,r.Title=Le,r.VBox=De,r.VSplitBox=Ie,r.animate=f,r.buildSubModules=v,r.closeAllModals=je,r.convertToModule=M,r.createDomModule=b,r.getColor=u,r.getI18n=o,r.getRouter=ge,r.getSize=$,r.hideLoading=ce,r.initRouter=Ct,r.rem=C,r.resetColor=Ce,r.resetSize=we,r.setColor=ae,r.setSize=re,r.showAlert=Be,r.showConfirm=Fe,r.showDrawer=Ye,r.showLoading=Pe,r.showModal=We,r.showSuccess=Ve,r.showToast=J,r.showWarning=p,Object.defineProperties(r,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
