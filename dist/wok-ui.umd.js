(function(r,q){typeof exports=="object"&&typeof module<"u"?q(exports):typeof define=="function"&&define.amd?define(["exports"],q):(r=typeof globalThis<"u"?globalThis:r||self,q(r.wokUI={}))})(this,function(r){"use strict";var q="";const ve={cancel:"cancel",confirm:"ok","form-err-required":"Please fill in this field.","form-err-must-check":"Please check this.","form-err-number":"Please enter a number.","form-err-min":"Not less than {}.","form-err-max":"Not greater than {}.","form-err-max-select":"Up to {} option(s) can be selected.","form-err-min-select":"Please select at least {} option(s).","form-err-max-length":"You can enter up to {} character(s).","form-err-min-length":"Please enter at least {} character(s)."};function V(i){const[e,t]=i.split("-");if(!e)throw new Error(`Unable to parse lang tag\uFF1A${i}`);return{lang:e.toLowerCase(),region:t?t.toLowerCase():void 0}}class U{constructor(e){this.enMsgs=e;const t=new Map;t.set("-",e),this.#i=new Map,this.#i.set("en",t),this.#e="en",this.#t=e}#e;#t;#i;async findMsgsByLang(e){const t=V(e),s=this.#i.get(t.lang);if(!s)return;let n,l="";if(t.region&&(l=t.region,n=s.get(l)),n||(l="-",n=s.get(l)),!n){const a=s.entries().next();a.value&&([l,n]=a.value)}if(!!n){if(typeof n=="function"){const a=await n();return s.set(l,a),a}return n}}setMsgs(e,t){const s=V(e);let n=this.#i.get(s.lang);n||(n=new Map,this.#i.set(s.lang,n)),n.set(s.region||"-",t)}getSupportedLanguageTags(...e){return e.filter(t=>{const s=V(t);return this.#i.get(s.lang)})}async setLang(e){const t=await this.findMsgsByLang(e);return t?(this.#e=e,this.#t=t,!0):!1}getLang(){return this.#e}buildMsg(e,...t){const s=this.#t[e];if(!t||!t.length)return s;let n=0;return s.replace(/\{\}/g,()=>`${t[n++]}`)}}class O extends U{#e=[];async setLang(e){for(const t of this.#e)await t.setLang(e);return super.setLang(e)}extend(e){const t=new U(e);return this.#e.push(t),t}}const be={cancel:"\u53D6\u6D88",confirm:"\u786E\u5B9A","form-err-required":"\u8BF7\u586B\u5199\u6B64\u9879","form-err-must-check":"\u5FC5\u987B\u52FE\u9009\u6B64\u9879","form-err-number":"\u8BF7\u8F93\u5165\u4E00\u4E2A\u6570\u5B57","form-err-min":"\u4E0D\u5F97\u5C0F\u4E8E {}","form-err-max":"\u4E0D\u5F97\u5927\u4E8E {}","form-err-max-select":"\u6700\u591A\u53EF\u4EE5\u9009\u62E9 {} \u4E2A\u9009\u9879","form-err-min-select":"\u8BF7\u81F3\u5C11\u9009\u62E9 {} \u4E2A\u9009\u9879","form-err-max-length":"\u6700\u591A\u53EF\u4EE5\u586B\u5199 {} \u4E2A\u5B57\u7B26","form-err-min-length":"\u8BF7\u586B\u5199\u81F3\u5C11 {} \u4E2A\u5B57\u7B26"};let p;function h(){if(p)return p;p=new O(ve),p.setMsgs("zh-CN",be);const i=p.getSupportedLanguageTags(...navigator.languages);return i.length&&p.setLang(i[0]),p}var Lt="",Et="",St="",Tt="",$t="",Mt="",Dt="",It="",Pt="",c=(i=>(i.FADE="animation-fade",i.SCALE_UP="animation-scale-up",i.SCALE_DOWN="animation-scale-down",i.SLIDE_TOP="animation-slide-top",i.SLIDE_BOTTOM="animation-slide-bottom",i.SLIDE_LEFT="animation-slide-left",i.SLIDE_RIGHT="animation-slide-right",i.SHAKE="animation-shake",i))(c||{});const N="animation-provision",ee="animation-reverse";async function f(i){i.el.classList.remove(...Object.values(c),ee),await new Promise(t=>{setTimeout(()=>{t()},0)}),i.el.classList.remove(N);const e=typeof i.duration=="number"&&i.duration>0?i.duration:500;return i.el.style.animationDuration=`${e}ms`,Array.isArray(i.animation)?i.el.classList.add(...i.animation):i.el.classList.add(i.animation),i.reverse&&i.el.classList.add(ee),new Promise(t=>{setTimeout(t,e)})}class d{constructor(e){this.el=e}#e=[];#t;#i=!1;replaceChild(e,t){if(t.getParent())throw new Error("The module you want to insert already has a parent module");const s=this.#e[e];return s?(this.insertChild(e,t),this.removeChild(s),!0):!1}insertChild(e,t){const s=M(t);if(s.#i)throw console.error("The module to be inserted has been destroyed",s),new Error("The module to be inserted has been destroyed");if(s.getParent())throw new Error("The module you want to insert already has a parent module");if(e===this.#e.length)return this.addChild(s),s.#t=this,!0;const n=this.#e[e];return n?(this.el.insertBefore(s.el,n.el),this.#e.splice(e,0,s),s.#t=this,!0):!1}moveChild(e,t){const s=this.getChild(e),n=this.getChild(t);if(!s||!n)return!1;if(this.#e.splice(e,1),this.#e.splice(t,0,s),e>t)this.el.insertBefore(s.el,n.el);else{const l=this.getChild(t+1);l?this.el.insertBefore(s.el,l.el):(this.el.removeChild(s.el),this.el.appendChild(s.el))}return!0}destroy(){if(this.#t){const e=this.#t.#e.indexOf(this);e!==-1&&this.#t.#e.splice(e,1),this.#t=void 0}this.empty(),this.el.remove(),this.#i=!0}empty(){[...this.#e].forEach(e=>e.destroy())}getParent(){return this.#t}replaceBy(e){if(!this.#t)return!1;const t=this.getIndex();return this.#t.replaceChild(t,e),!0}find(e){const t=[];for(const s of this.#e)e(s)&&t.push(s),t.push(...s.find(e));return t}findFirst(e){for(const t of this.#e){if(e(t))return t;const s=t.findFirst(e);if(s)return s}}addChild(...e){e.filter(t=>t!==void 0).forEach(t=>this.#s(t))}#s(e){const t=M(e);if(t.#i)throw console.error("The module to be added has been destroyed",e),new Error("The module to be added has been destroyed");if(t.getParent())throw new Error("The module you want to add already has a parent module");t.mount(this.el),this.#e.push(t),t.#t=this}removeChild(e){let t,s=-1;return typeof e=="number"?(s=e,t=this.#e[e]):(t=e,s=this.#e.findIndex(n=>n===e)),!t||s===-1?!1:(t.#t=void 0,t.destroy(),this.#e.splice(s,1),!0)}getChildren(){return this.#e}getChild(e){return this.#e[e]}mount(e){if(this.#t)throw new Error("The current module has already been added to a parent module and cannot be mounted");if(this.#i)throw new Error("The current module has been destroyed !");e.appendChild(this.el)}scrollIntoView(){this.el.scrollIntoView(!0)}getIndex(){return this.#t?this.#t.getChildren().findIndex(e=>e===this):-1}scrollIntoViewIfInvisible(){const e=this.el,t=e.getBoundingClientRect();let s=!1;t.top+t.height<0&&(s=!0),t.top+t.height>window.innerHeight&&(s=!0),t.left+t.width<0&&(s=!0),t.left>window.innerWidth&&(s=!0),s&&e.scrollIntoView(!0)}}class R extends d{constructor(e,t){super(e),t&&t.forEach(s=>this.addChild(s))}}class o extends d{constructor(...e){const t=document.createElement("div");super(t),t.classList.add(...e)}}function M(i){if(typeof i=="string"){const e=document.createElement("span");return e.innerText=`${i}`,new R(e)}if(typeof i=="number"){const e=document.createElement("div");return e.style.height=`${i}px`,new R(e)}return i instanceof HTMLElement?new R(i):i instanceof d?i:typeof i=="function"?i():x(i)}function b(i){if(Array.isArray(i))return i.map(e=>M(e));if(typeof i=="function"){const e=[],t=i((...s)=>e.push(...s));return t instanceof d?[t]:e.map(s=>M(s))}else return[M(i)]}function x(i){const e=document.createElement(i.tag||"div");if(i.preHandle&&i.preHandle(e),i.innerText?e.innerText=i.innerText:i.innerHTML&&(e.innerHTML=i.innerHTML),i.attrs){const{attrs:n}=i;Object.keys(i.attrs).forEach(l=>{const a=n[l];typeof a<"u"&&e.setAttribute(l,a)})}if(i.classNames&&(typeof i.classNames=="string"?e.classList.add(i.classNames):e.classList.add(...i.classNames.filter(n=>!!n))),i.style)for(let n in i.style){const l=i.style[n];!l||(e.style[n]=l)}if(i.onClick&&e.addEventListener("click",i.onClick),i.events)for(let n in i.events)e.addEventListener(n,i.events[n]);const t=i.children?b(i.children):[],s=new R(e,t);return i.postHandle&&i.postHandle(e),s}class te extends o{constructor(e){super(),this.addChild(e)}destroy(){const e=this.getParent();e&&e.removeChild(this),this.el.remove()}destroyThoroughly(){super.destroy()}}class xe extends d{constructor(e){super(e||document.createElement("div"))}#e=!1;#t=new Map;render(){this.#e=!0,setTimeout(()=>{if(!!this.#e){this.#e=!1;try{this.empty(),this.buildContent()}catch(e){console.error(e)}}},0)}cacheModule(e){const t=this.#t.get(e.key);if(t)return t;const s=new te(e.module());return this.#t.set(e.key,s),s}removeCache(e){const t=this.#t.get(e);t&&(t.destroyThoroughly(),this.#t.delete(e))}clearCaches(){Array.from(this.#t.values()).forEach(e=>e.destroyThoroughly()),this.#t.clear()}destroy(){Array.from(this.#t.values()).forEach(e=>e.destroyThoroughly()),super.destroy()}}var ie=(i=>(i[i.sm=576]="sm",i[i.md=768]="md",i[i.lg=992]="lg",i[i.xl=1200]="xl",i[i.xxl=1400]="xxl",i))(ie||{});class we extends d{#e;#t="xs";#i=!1;#s=new Map;constructor(e){super(e||document.createElement("div")),this.#e=()=>this.render(!1),window.addEventListener("resize",this.#e)}render(e=!0){this.#i=!0,setTimeout(()=>{try{this.#n(e)}catch(t){console.error(t)}},0)}#n(e){if(!this.#i)return;this.#i=!1;let t="xs";const s=window.innerWidth;s>=1400?t="xxl":s>=1200?t="xl":s>=992?t="lg":s>=768?t="md":s>=576?t="sm":t="xs",(e||this.#t!==t)&&(this.#t=t,this.empty(),this.buildContent({respSize:t,windowWidth:s}))}cacheModule(e){const t=this.#s.get(e.key);if(t)return t;const s=new te(e.module());return this.#s.set(e.key,s),s}removeCache(e){const t=this.#s.get(e);t&&(t.destroyThoroughly(),this.#s.delete(e))}clearCaches(){Array.from(this.#s.values()).forEach(e=>e.destroyThoroughly()),this.#s.clear()}destroyed(){window.removeEventListener("resize",this.#e),Array.from(this.#s.values()).forEach(e=>e.destroyThoroughly()),super.destroy()}}const se=window.getComputedStyle(document.body).fontSize;let w=se.endsWith("px")?parseInt(se):16;(isNaN(w)||w<14||w>20)&&(w=16);const I={text:w,textSm:w*.75,textLg:w*1.25,textXl:w*1.5,borderRadius:Math.round(w*.375)};Object.freeze(I);let _;function D(){return _||I}function ne(i){const{style:e}=document.body;e.setProperty("--size-text",`${i.text}px`),e.setProperty("--size-text-sm",`${i.textSm}px`),e.setProperty("--size-text-lg",`${i.textLg}px`),e.setProperty("--size-text-xl",`${i.textXl}px`),e.setProperty("--size-border-radius",`${i.borderRadius}px`),document.documentElement.style.fontSize=`${i.text}px`}ne(I);function re(i){const e=Object.assign({},I);for(let t in i){const s=i[t];!s||(e[t]=s)}_=Object.freeze(e),ne(_)}function Ce(){re(I)}function k(i){return D().text*i}const P={primary:"#1677ff",danger:"#ff4d4f",success:"#198754",warning:"#ffc107",border:"#dee2e6",text:"#303133",textSecondary:"#909399",outline:"#b1d2ff"};Object.freeze(P);let W;function le(i){const{style:e}=document.body;e.setProperty("--color-primary",i.primary),e.setProperty("--color-danger",i.danger),e.setProperty("--color-success",i.success),e.setProperty("--color-warning",i.warning),e.setProperty("--color-border",i.border),e.setProperty("--color-text",i.text),e.setProperty("--color-text-secondary",i.textSecondary),e.setProperty("--color-outline",i.outline),document.body.style.color=i.text}le(P);function u(){return W||P}function ae(i){const e=Object.assign({},P);for(let t in i){const s=i[t];!s||(e[t]=s)}W=Object.freeze(e),le(W)}function ke(){ae(P)}class m extends d{constructor(e){const t=typeof e=="string"?{text:e}:e,s=t.tag||"span";super(document.createElement(s)),this.el.className="wok-ui-text",this.el.innerText=t.text,t.size&&this.setSize(t.size),t.bold&&(this.el.style.fontWeight="bold"),t.color&&(this.el.style.color=t.color),t.onClick&&this.onClick(t.onClick)}setText(e){return this.el.innerText=e,this}setColor(e){return this.el.style.color=e,this}setSize(e){return e==="sm"?this.el.style.fontSize="0.8rem":e==="default"?this.el.style.fontSize="1rem":e==="large"?this.el.style.fontSize="1.2rem":e==="xl"?this.el.style.fontSize="1.4rem":this.el.style.fontSize=`${e}px`,this}setBold(e){return e?this.el.style.fontWeight="bold":this.el.style.fontWeight="normal",this}onClick(e){return this.el.style.cursor="pointer",this.el.addEventListener("click",e),this}}class he extends m{constructor(e){super({text:e,size:"default",color:u().text})}}class pe extends m{constructor(e){super({text:e,size:"default",color:u().textSecondary})}}class Le extends m{constructor(e){super({text:e,size:"sm",color:u().textSecondary})}}class Ee extends m{constructor(e){super({tag:"h2",text:e,size:"large",color:u().text,bold:!0}),this.el.style.margin="0"}}class Se extends m{constructor(e){super({tag:"h1",text:e,size:"xl",color:u().text,bold:!0}),this.el.style.margin="0"}}class Te extends o{constructor(e){super();let t=k(1);e==="sm"?t=k(.5):e==="lg"?t=k(2):typeof e=="number"&&(t=e),this.el.style.height=`${t}px`}}class oe extends o{constructor(e){super();let t=k(1);e==="sm"?t=k(.5):e==="lg"?t=k(2):typeof e=="number"&&(t=e),this.el.style.display="inline-block",this.el.style.width=`${t}px`,this.el.style.margin="0"}}var Ft="";class j extends d{constructor(e){const t=document.createElement("button");switch(t.type="button",t.classList.add("wok-ui-btn"),super(t),t.innerText=e.text,e.block&&t.classList.add("block"),e.disabled&&(t.disabled=!0),e.onClick&&(t.onclick=e.onClick),e.width&&e.width>0&&(t.style.width=`${e.width}px`),e.type){case"primary":this.#e(u().primary,!!e.outline);break;case"danger":this.#e(u().danger,!!e.outline);break;case"success":this.#e(u().success,!!e.outline);break;case"warning":this.#e(u().warning,!!e.outline);break;default:this.el.style.setProperty("--btn-bg-color","transparent"),this.el.style.setProperty("--btn-color",u().text),this.el.style.setProperty("--btn-border-color",u().border);break}t.type=e.formType||"button";const s=D();switch(e.size){case"lg":t.style.setProperty("--btn-font-size",`${s.textLg}px`);break;case"sm":t.style.setProperty("--btn-font-size",`${s.textSm}px`);break;default:t.style.setProperty("--btn-font-size",`${s.text}px`);break}}#e(e,t){t?(this.el.style.setProperty("--btn-bg-color","transparent"),this.el.style.setProperty("--btn-color",e),this.el.style.setProperty("--btn-border-color",e)):(this.el.style.setProperty("--btn-bg-color",e),this.el.style.setProperty("--btn-color","white"),this.el.style.setProperty("--btn-border-color",e))}setDisabled(e){const t=this.el;return t.disabled=e,this}onClick(e){const t=this.el;return t.onclick=e,this}}var Bt="";class $e extends o{#e;#t;constructor(e){if(super("wok-ui-grid"),this.#t=e,typeof e.gap=="number"?this.#e={col:e.gap,row:e.gap}:e.gap?this.#e=e.gap:this.#e={col:0,row:0},!Number.isInteger(e.cols))throw new Error(`cols \u5FC5\u987B\u662F\u6574\u6570,\u5F53\u524D\u503C: ${e.cols}`);if(e.cols<1||e.cols>12)throw new Error(`cols \u8D85\u51FA\u8303\u56F4, \u6709\u6548\u8303\u56F4\u662F 1-12 ,\u5F53\u524D\u503C: ${e.cols}`);this.el.style.columnGap=`${this.#e.col}px`,this.el.style.rowGap=`${this.#e.row}px`,b(e.cells).forEach(t=>this.addCell(t))}addCell(e){this.addChild({style:{width:`calc((100% - ${this.#e.col*(this.#t.cols-1)}px) / ${this.#t.cols})`,minWidth:this.#t.cellMinWidth&&this.#t.cellMinWidth>0?`${this.#t.cellMinWidth}px`:void 0},children:e})}}class Me extends o{constructor(e){if(super("wok-ui-hbox"),this.el.style.display="flex",typeof e.gap=="number"?this.el.style.gap=`${e.gap}px ${e.gap}px`:e.gap&&(this.el.style.gap=`${e.gap.row}px ${e.gap.column}px`),e.wrap?this.el.style.flexWrap="wrap":this.el.style.flexWrap="nowrap",e.reverse?this.el.style.flexDirection="row-reverse":this.el.style.flexDirection="row",e.align)switch(e.align){case"center":this.el.style.alignItems="center";break;case"top":this.el.style.alignItems="start";break;case"bottom":this.el.style.alignItems="end";break}this.addChild(...b(e.children)),e.onClick&&(this.el.style.cursor="pointer",this.el.addEventListener("click",e.onClick))}}var zt="";class De extends o{constructor(e){if(super("wok-ui-justify-box"),e.align)switch(e.align){case"center":this.el.style.alignItems="center";break;case"top":this.el.style.alignItems="start";break;case"bottom":this.el.style.alignItems="end";break}this.addChild(...b(e.children)),e.onClick&&(this.el.style.cursor="pointer",this.el.addEventListener("click",e.onClick))}}var At="";class Ie extends o{constructor(e){super("wok-ui-v-split-box"),this.el.style.height=`${e.height}px`,e.fixedSide==="top"?this.el.classList.add("fix-top"):this.el.classList.add("fix-bottom"),this.addChild(e.top,e.bottom),e.onClick&&(this.el.style.cursor="pointer",this.el.addEventListener("click",e.onClick))}}class de extends o{constructor(e){switch(super("wok-ui-h-split-box"),e.fixedSide){case"left":this.el.classList.add("fix-left");break;case"right":this.el.classList.add("fix-right");break}if(e.align)switch(e.align){case"center":this.el.style.alignItems="center";break;case"top":this.el.style.alignItems="start";break;case"bottom":this.el.style.alignItems="end";break;default:this.el.style.alignItems="stretch";break}e.gap&&e.gap>0&&(this.el.style.gap=`${e.gap}px`),this.addChild(e.left,e.right),e.onClick&&(this.el.style.cursor="pointer",this.el.addEventListener("click",e.onClick))}}var qt="";class Pe extends o{constructor(e){if(super("wok-ui-vbox"),e.gap&&e.gap>0&&(this.el.style.gap=`${e.gap}px`),e.align)switch(e.align){case"left":this.el.style.alignItems="start";break;case"center":this.el.style.alignItems="center";break;case"right":this.el.style.alignItems="end";break;case"stretch":this.el.style.alignItems="stretch";break}this.addChild(...b(e.children)),e.onClick&&(this.el.style.cursor="pointer",this.el.addEventListener("click",e.onClick))}}var Nt="";let F;function Fe(i){ce(),F=x({classNames:["wok-ui-loading"],children(e){e({classNames:["loading-spinner"],innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><path d="M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"/></svg>'}),i&&e(new he(i))}}),F.mount(document.body)}function ce(){F&&(F.destroy(),F=void 0)}var Rt="";function Be(i){return new Promise(e=>{const t=x({classNames:"wok-ui-dialog-box",children:{classNames:["dialog-content",c.SLIDE_TOP],children:[{classNames:"dialog-body",innerText:i},{classNames:"dialog-footer",children:{innerText:h().buildMsg("confirm"),onClick(s){e(),t.destroy()}}}]}});t.mount(document.body)})}function ze(i){return new Promise(e=>{const t=x({classNames:["wok-ui-dialog-box"],children:{classNames:["dialog-content",c.SLIDE_TOP],children:[{classNames:"dialog-body",innerText:i},{classNames:"dialog-footer",children:[{innerText:h().buildMsg("cancel"),onClick(s){e(!1),t.destroy()}},{children:new m({text:h().buildMsg("confirm"),color:u().primary}),onClick(s){e(!0),t.destroy()}}]}]}});t.mount(document.body)})}var Ht="",Vt="";class G extends o{constructor(e){super("wok-ui-svg-icon"),this.el.innerHTML=e;const t=this.el.querySelector("svg");t&&t.setAttribute("fill","currentColor")}setSize(e){return this.el.style.fontSize=`${e}px`,this}setColor(e){return this.el.style.color=e,this}}class Ae extends o{constructor(e){super("wok-ui-svg-icon"),fetch(e).then(async t=>{if(t.status!==200)throw new Error(`\u8BF7\u6C42\u56FE\u6807\u5931\u8D25\uFF0C\u72B6\u6001\u7801\uFF1A${t.status}\uFF0C\u5730\u5740\uFF1A${e}`);this.el.innerHTML=await t.text();const s=this.el.querySelector("svg");s&&s.setAttribute("fill","currentColor")}).catch(console.error)}setSize(e){return this.el.style.fontSize=`${e}px`,this}setColor(e){return this.el.style.color=e,this}}class qe extends G{constructor(){super('<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"/></svg>'),this.setColor(u().success)}}class Ne extends G{constructor(){super('<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-384c13.3 0 24 10.7 24 24V264c0 13.3-10.7 24-24 24s-24-10.7-24-24V152c0-13.3 10.7-24 24-24zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"/></svg>'),this.setColor(u().warning)}}class Re extends o{constructor(){super("wok-ui-oven")}addChild(...e){super.addChild(...e)}}class He extends o{constructor(e){switch(super("wok-ui-toast",c.SLIDE_TOP),e.type){case"success":this.addChild(new qe);break;case"warning":this.addChild(new Ne);break}this.addChild(new oe(8),new m(e.text)),setTimeout(()=>{this.destroy()},e.duration)}destroy(){f({el:this.el,animation:c.FADE,reverse:!0,duration:300}).then(()=>{super.destroy()}).catch(console.error)}}let H;function J(i){let e=3e3;i.duration&&i.duration>0&&(e=i.duration),H||(H=new Re,H.mount(document.body)),H.addChild(new He({type:i.type,text:i.text,duration:e}))}function y(i){let e="";typeof i=="string"?e=i:i instanceof Error?(e=i.message,console.error(i)):e=JSON.stringify(i),J({type:"warning",text:e})}function Ve(i){J({type:"success",text:i})}var Ut="";class Ue extends o{#e;constructor(e){super("wok-ui-modal"),this.#e=e}addDialog(e){e.onDestroy(()=>{this.getChildren().length===0&&this.destroy()}),this.addChild(e)}async closeAllModals(){const e=this.getChildren();for(const t of e)await t.close()}removeChild(e){const t=super.removeChild(e);return this.getChildren().length===0&&this.destroy(),t}destroy(){super.destroy(),this.#e.onDestroy()}}class _e extends o{#e=!1;#t;#i;constructor(e){if(super("wok-ui-modal-dialog",N),this.#i=e,f({el:this.el,animation:c.SLIDE_TOP,duration:300}).then(()=>{e.onShown&&e.onShown()}),this.#i.fullscreen?this.el.classList.add("fullscreen"):this.#i.dialogCentered&&this.el.classList.add("centered"),this.el.addEventListener("click",t=>{t.stopPropagation(),this.tryDestroy()}),e.replaceByBody){this.addChild({classNames:["wok-ui-modal-content"],style:{borderRadius:e.borderRadius&&e.borderRadius>0?`${e.borderRadius}px`:void 0,width:e.fullscreen?void 0:e.width&&e.width>0?`${e.width}px`:"500px"},onClick(t){t.stopPropagation()},children:e.body});return}this.addChild({classNames:["wok-ui-modal-content","normal"],style:{borderRadius:e.borderRadius&&e.borderRadius>0?`${e.borderRadius}px`:void 0,width:e.fullscreen?void 0:e.width&&e.width>0?`${e.width}px`:"500px"},onClick(t){t.stopPropagation()},children:t=>{if(e.title&&t({classNames:["wok-ui-modal-header"],children:s=>{s({classNames:["title"],innerText:e.title}),e.closeBtn!==!1&&s({classNames:["close"],innerHTML:"&times;",onClick:()=>{this.close().catch(y)}})}}),t({classNames:["wok-ui-modal-body"],children:e.body}),e.footer)t(e.footer);else if(e.buttons&&(e.buttons.cancel||e.buttons.confirm)){const{confirm:s,cancel:n}=e.buttons;t({classNames:["wok-ui-modal-footer"],children:l=>{s&&l(new j({text:typeof s=="string"?s:h().buildMsg("confirm"),type:"primary",onClick(a){e.onConfirm&&e.onConfirm()}})),n&&l(new j({text:typeof n=="string"?n:h().buildMsg("cancel"),onClick:a=>this.close().catch(y)}))}})}}})}tryDestroy(){if(this.#i.staticBackDrop){f({el:this.el,animation:c.SHAKE}).catch(y);return}this.close().catch(y)}onDestroy(e){this.#t=e}async close(){await f({el:this.el,animation:c.SLIDE_TOP,duration:300,reverse:!0}),this.destroy(),this.#t&&this.#t(),this.#i.onClose&&!this.#e&&(this.#i.onClose(),this.#e=!0)}}let L;function We(i){L||(L=new Ue({onDestroy:()=>L=void 0}),L.mount(document.body));const e=new _e(i);return L.addDialog(e),{close:()=>e.close()}}async function je(){L&&await L.closeAllModals()}var _t="";class Ge extends o{#e;constructor(e){super("wok-ui-drawer"),this.#e=e,this.el.addEventListener("click",()=>{const t=this.getChildren();t.length&&t[t.length-1].destroy()})}addContent(e){e.onDestroy(()=>{this.getChildren().length===0&&this.destroy()}),this.addChild(e)}destroy(){super.destroy(),this.#e.onDestroy()}}class Je extends o{#e=!1;#t;#i;constructor(e){if(super("wok-ui-drawer-content",N),this.#i=e,this.el.addEventListener("click",t=>t.stopPropagation()),e.placement==="left"?this.el.classList.add("left"):e.placement==="top"?this.el.classList.add("top"):e.placement==="bottom"?this.el.classList.add("bottom"):this.el.classList.add("right"),this.#s().catch(y),e.replaceByBody){this.addChild(...b(e.body));return}e.title&&this.addChild({classNames:["header"],children:[{classNames:["title"],innerText:e.title},{classNames:["close"],innerHTML:"&times;",onClick:()=>this.destroy()}]}),this.addChild({classNames:["body"],children:e.body})}#s(){return this.#i.placement==="left"?f({el:this.el,animation:c.SLIDE_LEFT}):this.#i.placement==="top"?f({el:this.el,animation:c.SLIDE_TOP}):this.#i.placement==="bottom"?f({el:this.el,animation:c.SLIDE_BOTTOM}):f({el:this.el,animation:c.SLIDE_RIGHT})}#n=!1;async#r(){this.#n=!0;try{this.#i.placement==="left"?await f({el:this.el,animation:c.SLIDE_LEFT,reverse:!0}):this.#i.placement==="top"?await f({el:this.el,animation:c.SLIDE_TOP,reverse:!0}):this.#i.placement==="bottom"?await f({el:this.el,animation:c.SLIDE_BOTTOM,reverse:!0}):await f({el:this.el,animation:c.SLIDE_RIGHT,reverse:!0})}finally{this.#n=!1}}onDestroy(e){this.#t=e}destroy(){this.#n||this.#r().then(()=>{super.destroy(),this.#t&&this.#t(),this.#i.onClose&&!this.#e&&(this.#i.onClose(),this.#e=!0)})}}let B;function Ye(i){B||(B=new Ge({onDestroy:()=>B=void 0}),B.mount(document.body));const e=new Je(i);return B.addContent(e),{close:()=>e.destroy()}}var Wt="";class Ke extends d{constructor(e){super(document.createElement("tr")),e.cols.forEach(t=>{this.addChild(new Qe({data:e.data,col:t,rowIdx:e.rowIdx}))})}}class Qe extends d{constructor(e){super(document.createElement("td"));const t=e.col.setting.content(e.data,e.rowIdx);t instanceof Promise?(this.el.innerText="\u52A0\u8F7D\u4E2D...",t.then(s=>{this.el.innerText="",typeof s=="string"?this.el.innerText=s:this.addChild(s)}).catch(s=>{this.el.innerText="",this.addChild(new m({text:"\u52A0\u8F7D\u5931\u8D25",color:u().danger})),y(s)})):this.addChild(t)}}class Xe extends d{constructor(e){super(document.createElement("tbody")),this.addChild(...e.list.map((t,s)=>new Ke({data:t,cols:e.cols,rowIdx:s})))}}class Ze extends d{constructor(e){super(document.createElement("thead")),this.addChild({tag:"tr",children:e.cols.map(t=>{const s=t.setting.width&&t.setting.width>0?t.setting.width:80;return new Oe(t.setting.name,s)})})}}class Oe extends d{constructor(e,t){if(super(document.createElement("th")),this.el.style.width=`${t}px`,typeof e=="string"){this.el.innerText=e;return}this.addChild(e)}}class et extends o{constructor(e){super("kk-table"),e.bordered&&this.el.classList.add("bordered"),this.addChild({tag:"table",children:[new Ze({cols:e.cols}),new Xe({table:this,list:e.list,cols:e.cols})]})}}class C extends d{}class tt extends d{#e;constructor(e){const t=document.createElement("form");t.noValidate=!0,t.autocomplete=e.autocomplete?"on":"off",super(t),this.#e=e,this.addChild(...b(e.children)),t.addEventListener("submit",s=>{s.preventDefault(),this.submit()})}submit(){if(!this.#e.onSubmit)return;const e=this.find(t=>t instanceof C).filter(t=>!t.validate());if(e.length){e[0].scrollIntoViewIfInvisible();return}this.#e.onSubmit()}}class g extends o{constructor(e){super(),this.el.classList.add("invalid-feedback"),this.el.innerText=e,this.el.style.paddingTop="0.5rem",this.el.style.lineHeight="1",this.el.style.color=u().danger}}var jt="";class E extends d{constructor(e){const t=document.createElement("input");if(t.type="checkbox",t.classList.add("wok-ui-checkbox"),super(t),t.value=e.value,this.value=e.value,this.#e=t,e.disabled&&(t.disabled=e.disabled),this.setStatus(e.status||"unchecked"),e.onChange){const{onChange:s}=e;this.el.addEventListener("change",n=>{n.stopPropagation(),s(this.getStatus())})}}#e;setStatus(e){if(e!==this.getStatus())switch(e){case"checked":this.#e.checked=!0,this.#e.indeterminate=!1;break;case"unchecked":this.#e.checked=!1,this.#e.indeterminate=!1;break;case"indeterminate":this.#e.checked=!1,this.#e.indeterminate=!0;break}}getStatus(){return this.#e.checked?"checked":this.#e.indeterminate?"indeterminate":"unchecked"}isChecked(){return this.#e.checked}setDisabled(e){this.#e.disabled=e}}var Gt="";class it extends C{#e=[];#t=!1;#i;constructor(e){super(document.createElement("div")),this.#i=e,this.el.classList.add("wok-ui-checkbox-group"),e.inline&&this.el.classList.add("inline"),e.value&&(this.#e=[...e.value]),e.disabled&&(this.#t=!0),this.addChild(...e.options.map(t=>x({tag:"label",classNames:["item"],children:[new E({value:t.value,status:this.#e.includes(t.value)?"checked":"unchecked",disabled:this.#t,onChange:s=>{if(s==="checked")this.#e.includes(t.value)||(this.#e.push(t.value),this.#s());else{const n=this.#e.indexOf(t.value);n!==-1&&(this.#e.splice(n,1),this.#s())}}}),new m(t.label)]})))}#s(){this.#i.onChange&&this.#i.onChange(this.#e),this.validate()}#n(){if(!this.#e.length)return this.#i.required?{valid:!1,msg:typeof this.#i.required=="string"?this.#i.required:h().buildMsg("form-err-must-check")}:{valid:!0};if(typeof this.#i.minSelected=="number"){if(this.#e.length<this.#i.minSelected)return{valid:!1,msg:h().buildMsg("form-err-min-select",`${this.#i.minSelected}`)}}else if(this.#i.minSelected&&this.#e.length<this.#i.minSelected.minSelected)return{valid:!1,msg:this.#i.minSelected.errMsg};if(typeof this.#i.maxSelected=="number"){if(this.#e.length>this.#i.maxSelected)return{valid:!1,msg:h().buildMsg("form-err-max-select",`${this.#i.maxSelected}`)}}else if(this.#i.maxSelected&&this.#e.length>this.#i.maxSelected.maxSelected)return{valid:!1,msg:this.#i.maxSelected.errMsg};return{valid:!0}}validate(){const e=this.#n();return this.getChildren().filter(t=>t instanceof g).forEach(t=>t.destroy()),e.valid||this.addChild(new g(e.msg)),e.valid}setDisabled(e){this.#t!==e&&(this.#t=e,this.find(t=>t instanceof E).map(t=>t).forEach(t=>t.setDisabled(this.#t)))}}var Jt="";class st extends C{#e=!1;#t=!1;#i;constructor(e){super(document.createElement("label")),this.#i=e,e.value&&(this.#e=e.value),this.addChild({classNames:["wok-ui-bool-checkbox"],children:[new E({value:"",status:this.#e?"checked":"unchecked",disabled:this.#t,onChange:t=>{this.#e=t==="checked",this.#i.onChange&&this.#i.onChange(this.#e),this.validate()}}),new m(e.label)]})}#s(){return this.#i.required&&!this.#e?{valid:!1,msg:typeof this.#i.required=="string"?this.#i.required:h().buildMsg("form-err-must-check")}:{valid:!0}}validate(){const e=this.#s();return this.getChildren().filter(t=>t instanceof g).forEach(t=>t.destroy()),e.valid||this.addChild(new g(e.msg)),e.valid}setDisabled(e){this.#t!==e&&(this.#t=e,this.find(t=>t instanceof E).map(t=>t).forEach(t=>t.setDisabled(this.#t)))}}function nt(){const i=new Date().getTime(),e=Math.floor(Math.random()*1e8);return`${i.toString(36)}${e.toString(36)}`}var Yt="";class Y extends d{#e;constructor(e){const t=document.createElement("input");t.type="radio",t.name=e.name,t.value=e.value,t.classList.add("wok-ui-radio"),super(t),this.#e=t,e.checked&&(t.checked=!0),e.disabled&&(t.disabled=!0),e.onChecked&&(t.onchange=()=>{t.checked&&e.onChecked&&e.onChecked()})}isChecked(){return this.#e.checked}setChecked(e){this.#e.checked!==e&&(this.#e.checked=e)}getValue(){return this.#e.value}setDisabled(e){this.#e.disabled=e}}var Kt="";class rt extends C{#e;#t="";#i;constructor(e){super(document.createElement("div")),this.#i=e,this.el.classList.add("wok-ui-radio-group"),this.#e=nt(),e.inline&&this.el.classList.add("inline"),this.addChild(...e.options.map(t=>x({tag:"label",children:[new Y({name:this.#e,value:t.value,checked:e.value===t.value,disabled:e.disabled,onChecked:()=>{this.#t=t.value,this.#i.onChange&&this.#i.onChange(this.#t),this.validate()}}),new m(t.label)]})))}#s(){return this.#t?{valid:!0}:this.#i.required?{valid:!1,msg:typeof this.#i.required=="string"?this.#i.required:h().buildMsg("form-err-must-check")}:{valid:!0}}validate(){const e=this.#s();return this.getChildren().filter(t=>t instanceof g).forEach(t=>t.destroy()),e.valid||this.addChild(new g(e.msg)),e.valid}setDisabled(e){this.find(t=>t instanceof Y).map(t=>t).forEach(t=>t.setDisabled(e))}}var Qt="";class S extends C{constructor(e){super(document.createElement("div")),this.#e=!1,this.#t=e,this.input=document.createElement("input"),this.input.type="text",this.input.classList.add("wok-ui-input");const t=D();switch(e.size){case"lg":this.input.style.setProperty("--input-font-size",`${t.textLg}px`);break;case"sm":this.input.style.setProperty("--input-font-size",`${t.textSm}px`);break;default:this.input.style.setProperty("--input-font-size",`${t.text}px`);break}this.addChild(this.input),this.input.placeholder=e.placeholder||"",typeof e.minLength=="number"?this.input.minLength=e.minLength:e.minLength&&(this.input.minLength=e.minLength.minLength),typeof e.maxLength=="number"?this.input.maxLength=e.maxLength:e.maxLength&&(this.input.maxLength=e.maxLength.maxLength),e.required&&(this.input.required=!0),e.value&&(this.input.value=e.value),e.disabled&&(this.input.disabled=!0),this.input.addEventListener("compositionstart",()=>this.#e=!0),this.input.addEventListener("compositionend",()=>{this.#e=!1,this.#i()}),this.input.addEventListener("input",()=>{this.#e||this.#i()}),e.onBlur&&this.input.addEventListener("blur",e.onBlur)}#e;#t;mount(e){super.mount(e),this.#t.autofocus&&setTimeout(()=>this.input.focus(),0)}focus(){this.input.focus()}#i(){this.#t.onChange&&this.#t.onChange(this.input.value),this.validate()}#s(e){if(this.#t.required&&!e)return{valid:!1,msg:typeof this.#t.required=="string"?this.#t.required:h().buildMsg("form-err-required")};if(!e)return{valid:!0};if(typeof this.#t.minLength=="number"){if(e.length<this.#t.minLength)return{valid:!1,msg:h().buildMsg("form-err-min-length",`${this.#t.minLength}`)}}else if(this.#t.minLength&&e.length<this.#t.minLength.minLength)return{valid:!1,msg:this.#t.minLength.errMsg};if(typeof this.#t.maxLength=="number"){if(e.length>this.#t.maxLength)return{valid:!1,msg:h().buildMsg("form-err-max-length",`${this.#t.maxLength}`)}}else if(this.#t.maxLength&&e.length>this.#t.maxLength.maxLength)return{valid:!1,msg:this.#t.maxLength.errMsg};return this.#t.validator?this.#t.validator(e):{valid:!0}}validate(){const e=this.#s(this.input.value);return this.getChildren().filter(t=>t instanceof g).forEach(t=>t.destroy()),e.valid?this.input.classList.remove("invalid"):(this.input.classList.add("invalid"),this.addChild(new g(e.msg))),e.valid}setDisabled(e){this.input.disabled=e}}class lt extends S{constructor(e){super(e),this.input.type="tel"}}class at extends S{constructor(e){super(e),this.input.type="search"}}class ht extends S{constructor(e){super(e),this.input.type="password"}}function T(i){const e=i.getFullYear(),t=i.getMonth()+1,s=i.getDate(),n=`${t}`.padStart(2,"0"),l=`${s}`.padStart(2,"0");return`${e}-${n}-${l}`}function ue(i){const e=new Date(i);return isNaN(e.getTime())?void 0:e}class ot extends S{constructor(e){super({required:e.required,value:e.value?T(e.value):void 0,disabled:e.disabled,placeholder:e.placeholder,size:e.size,validator(t){const s=ue(t);if(!s)return e.required?{valid:!1,msg:typeof e.required=="string"?e.required:h().buildMsg("form-err-required")}:{valid:!0};if(e.min instanceof Date){if(s.getTime()<e.min.getTime())return{valid:!1,msg:h().buildMsg("form-err-min",`${T(e.min)}`)}}else if(e.min&&s.getTime()<e.min.min.getTime())return{valid:!1,msg:e.min.errMsg};if(e.max instanceof Date){if(s.getTime()>e.max.getTime())return{valid:!1,msg:h().buildMsg("form-err-max",`${T(e.max)}`)}}else if(e.max&&s.getTime()>e.max.max.getTime())return{valid:!1,msg:e.max.errMsg};return{valid:!0}},onChange(t){if(!!e.onChange){if(!t){e.onChange(void 0);return}e.onChange(ue(t))}},onBlur:e.onBlur}),this.input.type="date",e.min instanceof Date?this.input.min=T(e.min):e.min&&(this.input.min=T(e.min.min)),e.max instanceof Date?this.input.max=T(e.max):e.max&&(this.input.max=T(e.max.max))}}var Xt="";class dt extends S{constructor(e){super(e),this.input.type="color"}}class ct extends S{constructor(e){super({required:e.required,placeholder:e.placeholder,value:typeof e.value=="number"?`${e.value}`:void 0,disabled:e.disabled,size:e.size,validator(t){if(!t)return e.required?{valid:!1,msg:typeof e.required=="string"?e.required:h().buildMsg("form-err-required")}:{valid:!0};const s=parseFloat(t);if(isNaN(s))return{valid:!1,msg:h().buildMsg("form-err-number")};if(typeof e.max=="number"){if(s>e.max)return{valid:!1,msg:h().buildMsg("form-err-max",`${e.max}`)}}else if(e.max&&s>e.max.max)return{valid:!1,msg:e.max.errMsg};if(typeof e.min=="number"){if(s<e.min)return{valid:!1,msg:h().buildMsg("form-err-min",`${e.min}`)}}else if(e.min&&s<e.min.min)return{valid:!1,msg:e.min.errMsg};return e.validator?e.validator(s):{valid:!0}},onChange(t){e.onChange&&(t?e.onChange(parseFloat(t)):e.onChange(void 0))},onBlur:e.onBlur}),this.input.type="number",typeof e.max=="number"?this.input.max=`${e.max}`:e.max&&(this.input.max=`${e.max.max}`),typeof e.min=="number"?this.input.min=`${e.min}`:e.min&&(this.input.min=`${e.min.min}`)}}class ut extends C{#e=!1;#t;#i;constructor(e){super(document.createElement("div")),this.#i=e,this.#t=document.createElement("textarea"),this.#t.classList.add("wok-ui-input");const t=D();switch(e.size){case"lg":this.#t.style.setProperty("--input-font-size",`${t.textLg}px`);break;case"sm":this.#t.style.setProperty("--input-font-size",`${t.textSm}px`);break;default:this.#t.style.setProperty("--input-font-size",`${t.text}px`);break}if(this.addChild(this.#t),this.#t.rows=e.rows&&e.rows>0?e.rows:3,typeof e.minLength=="number"?this.#t.minLength=e.minLength:e.minLength&&(this.#t.minLength=e.minLength.minLength),typeof e.maxLength=="number"?this.#t.maxLength=e.maxLength:e.maxLength&&(this.#t.maxLength=e.maxLength.maxLength),e.required&&(this.#t.required=!0),e.value&&(this.#t.value=e.value),e.disabled&&(this.#t.disabled=!0),e.placeholder&&(this.#t.placeholder=e.placeholder),this.#t.addEventListener("compositionstart",()=>this.#e=!0),this.#t.addEventListener("compositionend",()=>{this.#e=!1,this.#s()}),this.#t.addEventListener("input",()=>{this.#e||this.#s()}),e.onBlur){const{onBlur:s}=e;this.#t.addEventListener("blur",()=>s())}}#s(){this.#i.onChange&&this.#i.onChange(this.#t.value),this.validate()}#n(e){if(this.#i.required&&!e)return{valid:!1,msg:typeof this.#i.required=="string"?this.#i.required:h().buildMsg("form-err-required")};if(!e)return{valid:!0};if(typeof this.#i.minLength=="number"){if(e.length<this.#i.minLength)return{valid:!1,msg:h().buildMsg("form-err-min-length",`${this.#i.minLength}`)}}else if(this.#i.minLength&&e.length<this.#i.minLength.minLength)return{valid:!1,msg:this.#i.minLength.errMsg};if(typeof this.#i.maxLength=="number"){if(e.length>this.#i.maxLength)return{valid:!1,msg:h().buildMsg("form-err-max-length",`${this.#i.maxLength}`)}}else if(this.#i.maxLength&&e.length>this.#i.maxLength.maxLength)return{valid:!1,msg:this.#i.maxLength.errMsg};return this.#i.validator?this.#i.validator(e):{valid:!0}}validate(){const e=this.#n(this.#t.value);return this.getChildren().filter(t=>t instanceof g).forEach(t=>t.destroy()),e.valid?this.#t.classList.remove("invalid"):(this.#t.classList.add("invalid"),this.addChild(new g(e.msg))),e.valid}setDisabled(e){this.#t.disabled=e}}var Zt="";class ft extends C{#e;#t;constructor(e){super(document.createElement("div")),this.#t=e,this.addChild({tag:"select",classNames:["wok-ui-select"],postHandle:s=>{this.#e=s,e.value&&(this.#e.value=e.value),this.#e.addEventListener("change",n=>{this.#t.onChange&&this.#t.onChange(this.#e.value),this.validate()})},children:e.options.map(s=>({tag:"option",innerText:s.label,attrs:{value:s.value}}))});const t=D();switch(e.size){case"lg":this.#e.style.setProperty("--select-font-size",`${t.textLg}px`);break;case"sm":this.#e.style.setProperty("--select-font-size",`${t.textSm}px`);break;default:this.#e.style.setProperty("--select-font-size",`${t.text}px`);break}}#i(e){return this.#t.required&&!e?{valid:!1,msg:typeof this.#t.required=="string"?this.#t.required:h().buildMsg("form-err-required")}:{valid:!0}}validate(){const e=this.#i(this.#e.value);return this.getChildren().filter(t=>t instanceof g).forEach(t=>t.destroy()),e.valid?this.#e.classList.remove("invalid"):(this.#e.classList.add("invalid"),this.addChild(new g(e.msg))),e.valid}setDisabled(e){this.#e.disabled=e}}var Ot="";class mt extends C{#e;constructor(e){if(super(document.createElement("div")),this.#e=document.createElement("input"),this.#e.classList.add("wok-ui-range"),this.#e.type="range",this.#e.min=`${e.min}`,this.#e.max=`${e.max}`,typeof e.step=="number"?this.#e.step=`${e.step}`:this.#e.step="1",this.#e.value=`${e.value}`,!e.showValue){this.addChild(this.#e),this.#e.addEventListener("change",()=>{this.#e.title=this.#e.value,e.onChange&&e.onChange(parseInt(this.#e.value))});return}const t=e.showValue?new m(`${e.value}`):void 0;this.#e.addEventListener("change",()=>{this.#e.title=this.#e.value,t&&t.setText(this.#e.value),e.onChange&&e.onChange(parseInt(this.#e.value))}),t?this.addChild(new de({left:this.#e,right:t,gap:k(.5),fixedSide:"right"})):this.addChild(this.#e)}validate(){return!0}setDisabled(e){this.#e.disabled=e}}class K{constructor(e){this.setting=e}}class gt extends K{#e;#t=[];constructor(e){let t;e.name||(t=new E({status:"unchecked",onChange:s=>{!t||(t.isChecked()?this.#t.forEach(n=>n.setStatus("checked")):this.#t.forEach(n=>n.setStatus("unchecked")),e.onChange&&e.onChange(this.getCheckedValues()))},value:""})),super({name:e.name||t||"",content:(s,n)=>{const l=e.value(s,n),a=e.checked?e.checked(s,n):!1,v=new E({status:a?"checked":"unchecked",value:l,onChange:()=>{const A=this.getCheckedValues();e.onChange&&e.onChange(A),this.#i()}});return this.#t.push(v),v},width:30}),this.#e=t}#i(){if(!this.#e)return;const e=this.getCheckedValues();e.length===this.#t.length?this.#e.setStatus("checked"):e.length===0?this.#e.setStatus("unchecked"):this.#e.setStatus("indeterminate")}getCheckedValues(){return this.#t.filter(e=>e.isChecked()).map(e=>e.value)}checkAll(){this.#e&&this.#e.setStatus("checked"),this.#t.forEach(e=>e.setStatus("checked"))}uncheckAll(){this.#e&&this.#e.setStatus("unchecked"),this.#t.forEach(e=>e.setStatus("unchecked"))}}class yt extends K{constructor(){super({name:"#",content:(e,t)=>`${t+1}`,width:30})}}function fe(i){const e={};return i.split("&").forEach(s=>{if(!s)return;const n=s.split("=");if(n.length!==2)return;const l=decodeURIComponent(n[0]),a=decodeURIComponent(n[1]);if(!e[l]){e[l]=a;return}const v=e[l];if(typeof v=="string"){e[l]=[v,a];return}v.push(a)}),e}function Q(i){const e=[];for(const t in i){const s=i[t];if(typeof s=="string"){e.push(`${encodeURIComponent(t)}=${encodeURIComponent(s)}`);continue}s.forEach(n=>{e.push(`${encodeURIComponent(t)}=${encodeURIComponent(n)}`)})}return e.join("&")}function X(i){return i.split("/").filter(t=>!!t).map(t=>{if(t.startsWith(":")){const s=t.substring(1);return{type:"variable",varName:s}}return{type:"constant",value:t}})}function vt(i,e){const t=i.split("/").filter(n=>!!n);if(t.length!==e.length)return{matched:!1};const s={};for(let n=0;n<t.length;n++){const l=e[n],a=t[n];if(l.type==="constant"){if(l.value!==a)return{matched:!1};continue}l.varName&&(s[l.varName]=a)}return{matched:!0,vars:s}}function bt(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;t++){const s=i[t],n=e[t];if(s.type!==n.type||s.type==="constant"&&s.value!==n.value)return!1}return!0}class z extends o{constructor(e,t){super(),this.key=e,this.addChild(t)}#e=0;#t="";cacheScrollTop(){this.#e=window.scrollY}hide(){this.el.style.display="none",this.#t=document.title,this.find(()=>!0).forEach(e=>{const t=e;t.onPageHide&&t.onPageHide()})}show(){this.el.style.display="block",this.#t&&(document.title=this.#t),this.#e&&setTimeout(()=>{window.scrollTo({top:this.#e,behavior:"instant"})},0),this.find(()=>!0).forEach(e=>{const t=e;t.onPageShow&&t.onPageShow()})}}class Z extends d{#e=[];#t;#i="";#s={};#n={};#r;#h=10;#l;constructor(e){super(document.createElement("div")),e.cacheLimit&&e.cacheLimit>=1&&(this.#h=e.cacheLimit),e.rules.flatMap(t=>{if(!t.alias)return[{pathRule:t.path,module:t.module,parts:X(t.path),cache:!!t.cache}];const s=t.alias.map(n=>({pathRule:n,module:t.module,parts:X(n),cache:!!t.cache}));return[{pathRule:t.path,module:t.module,parts:X(t.path),cache:!!t.cache},...s]}).forEach(t=>{if(t.pathRule==="*"){if(this.#t)throw new Error("\u9ED8\u8BA4\u8DEF\u5F84\u91CD\u590D\uFF0C\u914D\u7F6E\u4E86\u591A\u4E2A\u8DEF\u5F84\u4E3A * \u7684\u8DEF\u7531");this.#t=t;return}const s=this.#e.find(n=>bt(n.parts,t.parts));if(s)throw new Error(`\u8DEF\u5F84\u89C4\u5219\u91CD\u590D\uFF1A${t.pathRule} \uFF0C${s.pathRule}`);this.#e.push(t)}),this.#l=()=>{this.#r&&this.#r instanceof z&&this.#r.cacheScrollTop()},window.addEventListener("scroll",this.#l)}handleUrl(){const e=this.parseCurrentUrl();this.#i=e.path,this.#n=e.query||{};const t=this.#e.find(s=>{const n=vt(this.#i,s.parts);return n.matched?(this.#s=n.vars||{},!0):!1});if(this.#r&&(this.#r instanceof z?this.#r.hide():this.#r.destroy()),!t)this.#t?this.#a(this.#t.module).then(s=>{this.addChild(s),this.#r=s}).catch(y):y("\u8DEF\u5F84\u672A\u8BBE\u7F6E\uFF1A"+this.#i);else if(t.cache){const s=JSON.stringify(e),n=this.getChildren().filter(l=>l instanceof z).map(l=>l).find(l=>l.key===s);if(n){n.show(),this.#r=n;return}this.#a(t.module).then(l=>{const a=new z(s,l);this.addChild(a),this.#r=a;const v=this.getChildren().filter(A=>A instanceof z).map(A=>A);v.length>this.#h&&this.removeChild(v[0])}).catch(y)}else this.#a(t.module).then(s=>{this.addChild(s),this.#r=s}).catch(y)}async#a(e){return e()}getRouterInfo(){return{path:this.#i,query:this.#n}}getParam(e){const t=this.#n[e];return t?typeof t=="string"?t:t[0]||"":""}getParamVals(e){const t=this.#n[e];return typeof t=="string"?[t]:t}getPathVar(e){return this.#s[e]||""}destroy(){window.removeEventListener("scroll",this.#l),super.destroy()}}class xt extends Z{#e;constructor(e,t){super({rules:e,cacheLimit:t}),this.#e=()=>this.handleUrl(),window.addEventListener("hashchange",this.#e),setTimeout(()=>this.handleUrl(),0)}parseCurrentUrl(){let{hash:e}=location;e.startsWith("#")&&(e=e.substring(1));const t=e.indexOf("?");let s=e;t!==-1&&(s=e.substring(0,t));let n={};return t!==-1&&(n=fe(e.substring(t+1))),{path:s,query:n}}buildUrl(e){const{href:t}=location,s=t.indexOf("#"),n=s===-1?t:t.substring(0,s);if(typeof e=="string")return`${n}#${e}`;const l=Q(e.query),a=`${e.path}?${l}`;return`${n}#${a}`}push(e){if(typeof e=="string"){location.hash=e;return}const t=Q(e.query);location.hash=`${e.path}?${t}`}replace(e){location.replace(this.buildUrl(e))}destroy(){window.removeEventListener("hashchange",this.#e),super.destroy()}}class wt extends Z{constructor(e){super({rules:e.rules,cacheLimit:e.cacheLimit}),this.base=e.base;const{pathname:t}=location;if(this.base&&!t.startsWith(this.base))throw new Error("\u65E0\u6CD5\u521B\u5EFA\u8DEF\u7531\uFF0C\u5F53\u524D\u8DEF\u5F84\u4E0D\u5728\u8BBE\u5B9A\u7684 base \u4E0B");this.listener=()=>this.handleUrl(),window.addEventListener("popstate",this.listener),setTimeout(()=>this.handleUrl(),0)}parseCurrentUrl(){const{href:e,origin:t}=location;let s=e.substring(t.length);const n=s.indexOf("#");n!==-1&&(s=s.substring(0,n));let l;const a=s.indexOf("?");if(a!==-1){const v=s.substring(a+1);s=s.substring(0,a),l=fe(v)}return{path:s,query:l}}buildUrl(e){if(typeof e=="string")return this.buildUrl({path:e,query:{}});let t=e.path;return t.startsWith("/")||(t=`/${t}`),this.base&&(t=`${this.base}${t}`),t.startsWith("/")||(t=`/${t}`),e.query&&(t=`${t}?${Q(e.query)}`),`${location.origin}${t}`}push(e){history.pushState({},"",this.buildUrl(e))}replace(e){history.replaceState({},"",this.buildUrl(e))}destroy(){window.removeEventListener("popstate",this.listener)}}var ei="";class me extends d{constructor(e){const t=document.createElement("a");super(t),t.classList.add("wok-ui-link"),typeof e.content=="string"?t.innerText=e.content:Array.isArray(e.content)?this.addChild(...e.content):this.addChild(e.content),e.url?t.href=e.url:e.onClick&&(t.href="javascript:;"),e.target&&(t.target=`_${e.target}`),e.download&&(t.download=e.download),e.onClick&&t.addEventListener("click",s=>{s.preventDefault(),e.onClick&&e.onClick(s)})}triggerClick(){return this.el.click(),this}}class Ct extends me{constructor(e){const t=ge(),s=t.buildUrl(e.query?{path:e.path,query:e.query}:e.path);super({content:e.content,url:s,onClick(n){n.stopPropagation(),n.stopPropagation(),e.replace?e.query?t.replace({path:e.path,query:e.query}):t.replace(e.path):e.query?t.push({path:e.path,query:e.query}):t.push(e.path)}})}}let $;function kt(i){return $||(i.mode==="hash"?$=new xt(i.rules,i.cacheLimit):$=new wt({rules:i.rules,cacheLimit:i.cacheLimit,base:i.base}),$)}function ge(){if(!$)throw new Error("\u8DEF\u7531\u5C1A\u672A\u521D\u59CB\u5316");return $}var ti="";class ye extends o{#e;constructor(e){super("wok-ui-dropdown"),this.el.addEventListener("click",s=>{this.el.classList.contains("open")?this.#i():(this.el.classList.add("open"),setTimeout(()=>this.#t(),0))}),this.addChild(...b(e.content));const t=e.menusAlign||"left";Array.isArray(e.menus)?this.addChild({classNames:["wok-ui-dropdown-menu",t],onClick(s){s.stopPropagation()},children:e.menus.map(s=>s.label?x({classNames:["wok-ui-dropdown-item",s.disabled?"disabled":""],innerText:s.label,onClick:n=>{s.disabled||(this.#i(),s.callback&&s.callback())}}):x(s))}):this.addChild({classNames:["wok-ui-dropdown-menu",t],onClick(s){s.stopPropagation()},children:e.menus})}#t(){const e=n=>{n.stopPropagation();const l=n.target;this.el.contains(l)||this.el.classList.contains("open")&&this.#i()};let t=this.el.parentElement,s=[];for(;t;)s.push(t),t.addEventListener("click",e),t=t.parentElement;this.#e=()=>s.forEach(n=>n.removeEventListener("click",e))}#i(){if(this.el.classList.remove("open"),this.#e){this.#e(),this.#e=void 0;return}}destroy(){this.#e&&this.#e(),super.destroy()}}class pt extends ye{constructor(e){super(e),this.el.classList.add("dropup")}}r.ANIMATION_PROVISION=N,r.Animation=c,r.BoolCheckbox=st,r.Button=j,r.Checkbox=E,r.CheckboxGroup=it,r.ColorInput=dt,r.DateInput=ot,r.DivModule=o,r.Dropdown=ye,r.Dropup=pt,r.ExtensibleI18n=O,r.Form=tt,r.FormInput=C,r.FullRenderingModule=xe,r.Grid=$e,r.HBox=Me,r.HSpacer=oe,r.HSplitBox=de,r.I18n=U,r.InvalidFeedback=g,r.JustifyBox=De,r.LargeTitle=Se,r.Link=me,r.Module=d,r.NumberInput=ct,r.PasswordInput=ht,r.PrimaryBodyText=he,r.Radio=Y,r.RadioGroup=rt,r.Range=mt,r.RemoteSvgIcon=Ae,r.ResponsiveBreakPoint=ie,r.ResponsiveModule=we,r.Router=Z,r.RouterLink=Ct,r.SearchInput=at,r.SecondaryBodyText=pe,r.Select=ft,r.SmallSecondaryBodyText=Le,r.Spacer=Te,r.SvgIcon=G,r.Table=et,r.TableCheckboxColumn=gt,r.TableColumn=K,r.TableIndexColumn=yt,r.TelInput=lt,r.Text=m,r.TextArea=ut,r.TextInput=S,r.Title=Ee,r.VBox=Pe,r.VSplitBox=Ie,r.animate=f,r.buildSubModules=b,r.closeAllModals=je,r.convertToModule=M,r.createDomModule=x,r.getColor=u,r.getI18n=h,r.getRouter=ge,r.getSize=D,r.hideLoading=ce,r.initRouter=kt,r.rem=k,r.resetColor=ke,r.resetSize=Ce,r.setColor=ae,r.setSize=re,r.showAlert=Be,r.showConfirm=ze,r.showDrawer=Ye,r.showLoading=Fe,r.showModal=We,r.showSuccess=Ve,r.showToast=J,r.showWarning=y,Object.defineProperties(r,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
