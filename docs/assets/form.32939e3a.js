var I=(r,t,e)=>{if(!t.has(r))throw TypeError("Cannot "+e)};var i=(r,t,e)=>(I(r,t,"read from private field"),e?e.call(r):t.get(r)),d=(r,t,e)=>{if(t.has(r))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(r):t.set(r,e)},o=(r,t,e,a)=>(I(r,t,"write to private field"),a?a.call(r,e):t.set(r,e),e);var b=(r,t,e)=>(I(r,t,"access private method"),e);import{c as H,b as R,g as f,M as _,m as K,r as Q,T as O,F as ee,L as ie,S as u,P as v,H as te,B as J}from"./index.0f65c826.js";import{s as ae}from"./index.1bea228e.js";import{F as re}from"./form.5ae796c7.js";import{F as $,I as y}from"./invalid-feedback.11287e18.js";import{C as j,B as se}from"./bool-checkbox.28b21e59.js";import{T as z}from"./text.0e40ba08.js";import{H as ne}from"./split-box.df10df5c.js";var m,E,h,S,N,M,U;class le extends ${constructor(e){super(document.createElement("div"));d(this,S);d(this,M);d(this,m,[]);d(this,E,!1);d(this,h,void 0);o(this,h,e),this.el.classList.add("wok-ui-checkbox-group"),e.inline&&this.el.classList.add("inline"),e.value&&o(this,m,[...e.value]),e.disabled&&o(this,E,!0),this.addChild(...e.options.map(a=>H({tag:"label",classNames:["item"],children:[new j({value:a.value,status:i(this,m).includes(a.value)?"checked":"unchecked",disabled:i(this,E),onChange:g=>{if(g==="checked")i(this,m).includes(a.value)||(i(this,m).push(a.value),b(this,S,N).call(this));else{const B=i(this,m).indexOf(a.value);B!==-1&&(i(this,m).splice(B,1),b(this,S,N).call(this))}}}),new R(a.label)]})))}validate(){const e=b(this,M,U).call(this);return this.getChildren().filter(a=>a instanceof y).forEach(a=>a.destroy()),e.valid||this.addChild(new y(e.msg)),e.valid}setDisabled(e){i(this,E)!==e&&(o(this,E,e),this.find(a=>a instanceof j).map(a=>a).forEach(a=>a.setDisabled(i(this,E))))}}m=new WeakMap,E=new WeakMap,h=new WeakMap,S=new WeakSet,N=function(){i(this,h).onChange&&i(this,h).onChange(i(this,m)),this.validate()},M=new WeakSet,U=function(){if(!i(this,m).length)return i(this,h).required?{valid:!1,msg:typeof i(this,h).required=="string"?i(this,h).required:f().buildMsg("form-err-must-check")}:{valid:!0};if(typeof i(this,h).minSelected=="number"){if(i(this,m).length<i(this,h).minSelected)return{valid:!1,msg:f().buildMsg("form-err-min-select",`${i(this,h).minSelected}`)}}else if(i(this,h).minSelected&&i(this,m).length<i(this,h).minSelected.minSelected)return{valid:!1,msg:i(this,h).minSelected.errMsg};if(typeof i(this,h).maxSelected=="number"){if(i(this,m).length>i(this,h).maxSelected)return{valid:!1,msg:f().buildMsg("form-err-max-select",`${i(this,h).maxSelected}`)}}else if(i(this,h).maxSelected&&i(this,m).length>i(this,h).maxSelected.maxSelected)return{valid:!1,msg:i(this,h).maxSelected.errMsg};return{valid:!0}};function ue(){const r=new Date().getTime(),t=Math.floor(Math.random()*1e8);return`${r.toString(36)}${t.toString(36)}`}var x;class V extends _{constructor(e){const a=document.createElement("input");a.type="radio",a.name=e.name,a.value=e.value,a.classList.add("wok-ui-radio");super(a);d(this,x,void 0);o(this,x,a),e.checked&&(a.checked=!0),e.disabled&&(a.disabled=!0),e.onChecked&&(a.onchange=()=>{a.checked&&e.onChecked&&e.onChecked()})}isChecked(){return i(this,x).checked}setChecked(e){i(this,x).checked!==e&&(i(this,x).checked=e)}getValue(){return i(this,x).value}setDisabled(e){i(this,x).disabled=e}}x=new WeakMap;var k,F,C,T,W;class he extends ${constructor(e){super(document.createElement("div"));d(this,T);d(this,k,void 0);d(this,F,"");d(this,C,void 0);o(this,C,e),this.el.classList.add("wok-ui-radio-group"),o(this,k,ue()),e.inline&&this.el.classList.add("inline"),this.addChild(...e.options.map(a=>H({tag:"label",children:[new V({name:i(this,k),value:a.value,checked:e.value===a.value,disabled:e.disabled,onChecked:()=>{o(this,F,a.value),i(this,C).onChange&&i(this,C).onChange(i(this,F)),this.validate()}}),new R(a.label)]})))}validate(){const e=b(this,T,W).call(this);return this.getChildren().filter(a=>a instanceof y).forEach(a=>a.destroy()),e.valid||this.addChild(new y(e.msg)),e.valid}setDisabled(e){this.find(a=>a instanceof V).map(a=>a).forEach(a=>a.setDisabled(e))}}k=new WeakMap,F=new WeakMap,C=new WeakMap,T=new WeakSet,W=function(){return i(this,F)?{valid:!0}:i(this,C).required?{valid:!1,msg:typeof i(this,C).required=="string"?i(this,C).required:f().buildMsg("form-err-must-check")}:{valid:!0}};function L(r){const t=r.getFullYear(),e=r.getMonth()+1,a=r.getDate(),g=`${e}`.padStart(2,"0"),B=`${a}`.padStart(2,"0");return`${t}-${g}-${B}`}function G(r){const t=new Date(r);return isNaN(t.getTime())?void 0:t}class de extends z{constructor(t){super({required:t.required,value:t.value?L(t.value):void 0,disabled:t.disabled,placeholder:t.placeholder,size:t.size,validator(e){const a=G(e);if(!a)return t.required?{valid:!1,msg:typeof t.required=="string"?t.required:f().buildMsg("form-err-required")}:{valid:!0};if(t.min instanceof Date){if(a.getTime()<t.min.getTime())return{valid:!1,msg:f().buildMsg("form-err-min",`${L(t.min)}`)}}else if(t.min&&a.getTime()<t.min.min.getTime())return{valid:!1,msg:t.min.errMsg};if(t.max instanceof Date){if(a.getTime()>t.max.getTime())return{valid:!1,msg:f().buildMsg("form-err-max",`${L(t.max)}`)}}else if(t.max&&a.getTime()>t.max.max.getTime())return{valid:!1,msg:t.max.errMsg};return{valid:!0}},onChange(e){if(!!t.onChange){if(!e){t.onChange(void 0);return}t.onChange(G(e))}},onBlur:t.onBlur}),this.input.type="date",t.min instanceof Date?this.input.min=L(t.min):t.min&&(this.input.min=L(t.min.min)),t.max instanceof Date?this.input.max=L(t.max):t.max&&(this.input.max=L(t.max.max))}}class oe extends z{constructor(t){super(t),this.input.type="color"}}class me extends z{constructor(t){super({required:t.required,placeholder:t.placeholder,value:typeof t.value=="number"?`${t.value}`:void 0,disabled:t.disabled,size:t.size,validator(e){if(!e)return t.required?{valid:!1,msg:typeof t.required=="string"?t.required:f().buildMsg("form-err-required")}:{valid:!0};const a=parseFloat(e);if(isNaN(a))return{valid:!1,msg:f().buildMsg("form-err-number")};if(typeof t.max=="number"){if(a>t.max)return{valid:!1,msg:f().buildMsg("form-err-max",`${t.max}`)}}else if(t.max&&a>t.max.max)return{valid:!1,msg:t.max.errMsg};if(typeof t.min=="number"){if(a<t.min)return{valid:!1,msg:f().buildMsg("form-err-min",`${t.min}`)}}else if(t.min&&a<t.min.min)return{valid:!1,msg:t.min.errMsg};return t.validator?t.validator(a):{valid:!0}},onChange(e){t.onChange&&(e?t.onChange(parseFloat(e)):t.onChange(void 0))},onBlur:t.onBlur}),this.input.type="number",typeof t.max=="number"?this.input.max=`${t.max}`:t.max&&(this.input.max=`${t.max.max}`),typeof t.min=="number"?this.input.min=`${t.min}`:t.min&&(this.input.min=`${t.min.min}`)}}var D,s,l,q,P,p,X;class fe extends ${constructor(e){super(document.createElement("div"));d(this,q);d(this,p);d(this,D,!1);d(this,s,void 0);d(this,l,void 0);o(this,l,e),o(this,s,document.createElement("textarea")),i(this,s).classList.add("wok-ui-input");const a=K();switch(e.size){case"lg":i(this,s).style.setProperty("--input-font-size",`${a.textLg}px`);break;case"sm":i(this,s).style.setProperty("--input-font-size",`${a.textSm}px`);break;default:i(this,s).style.setProperty("--input-font-size",`${a.text}px`);break}if(this.addChild(i(this,s)),i(this,s).rows=e.rows&&e.rows>0?e.rows:3,typeof e.minLength=="number"?i(this,s).minLength=e.minLength:e.minLength&&(i(this,s).minLength=e.minLength.minLength),typeof e.maxLength=="number"?i(this,s).maxLength=e.maxLength:e.maxLength&&(i(this,s).maxLength=e.maxLength.maxLength),e.required&&(i(this,s).required=!0),e.value&&(i(this,s).value=e.value),e.disabled&&(i(this,s).disabled=!0),e.placeholder&&(i(this,s).placeholder=e.placeholder),i(this,s).addEventListener("compositionstart",()=>o(this,D,!0)),i(this,s).addEventListener("compositionend",()=>{o(this,D,!1),b(this,q,P).call(this)}),i(this,s).addEventListener("input",()=>{i(this,D)||b(this,q,P).call(this)}),e.onBlur){const{onBlur:g}=e;i(this,s).addEventListener("blur",()=>g())}}validate(){const e=b(this,p,X).call(this,i(this,s).value);return this.getChildren().filter(a=>a instanceof y).forEach(a=>a.destroy()),e.valid?i(this,s).classList.remove("invalid"):(i(this,s).classList.add("invalid"),this.addChild(new y(e.msg))),e.valid}setDisabled(e){i(this,s).disabled=e}}D=new WeakMap,s=new WeakMap,l=new WeakMap,q=new WeakSet,P=function(){i(this,l).onChange&&i(this,l).onChange(i(this,s).value),this.validate()},p=new WeakSet,X=function(e){if(i(this,l).required&&!e)return{valid:!1,msg:typeof i(this,l).required=="string"?i(this,l).required:f().buildMsg("form-err-required")};if(!e)return{valid:!0};if(typeof i(this,l).minLength=="number"){if(e.length<i(this,l).minLength)return{valid:!1,msg:f().buildMsg("form-err-min-length",`${i(this,l).minLength}`)}}else if(i(this,l).minLength&&e.length<i(this,l).minLength.minLength)return{valid:!1,msg:i(this,l).minLength.errMsg};if(typeof i(this,l).maxLength=="number"){if(e.length>i(this,l).maxLength)return{valid:!1,msg:f().buildMsg("form-err-max-length",`${i(this,l).maxLength}`)}}else if(i(this,l).maxLength&&e.length>i(this,l).maxLength.maxLength)return{valid:!1,msg:i(this,l).maxLength.errMsg};return i(this,l).validator?i(this,l).validator(e):{valid:!0}};var c,w,A,Z;class Y extends ${constructor(e){super(document.createElement("div"));d(this,A);d(this,c,void 0);d(this,w,void 0);o(this,w,e),this.addChild({tag:"select",classNames:["wok-ui-select"],postHandle:g=>{o(this,c,g),e.value&&(i(this,c).value=e.value),i(this,c).addEventListener("change",B=>{i(this,w).onChange&&i(this,w).onChange(i(this,c).value),this.validate()})},children:e.options.map(g=>({tag:"option",innerText:g.label,attrs:{value:g.value}}))});const a=K();switch(e.size){case"lg":i(this,c).style.setProperty("--select-font-size",`${a.textLg}px`);break;case"sm":i(this,c).style.setProperty("--select-font-size",`${a.textSm}px`);break;default:i(this,c).style.setProperty("--select-font-size",`${a.text}px`);break}}validate(){const e=b(this,A,Z).call(this,i(this,c).value);return this.getChildren().filter(a=>a instanceof y).forEach(a=>a.destroy()),e.valid?i(this,c).classList.remove("invalid"):(i(this,c).classList.add("invalid"),this.addChild(new y(e.msg))),e.valid}setDisabled(e){i(this,c).disabled=e}}c=new WeakMap,w=new WeakMap,A=new WeakSet,Z=function(e){return i(this,w).required&&!e?{valid:!1,msg:typeof i(this,w).required=="string"?i(this,w).required:f().buildMsg("form-err-required")}:{valid:!0}};var n;class ce extends ${constructor(e){super(document.createElement("div"));d(this,n,void 0);if(o(this,n,document.createElement("input")),i(this,n).classList.add("wok-ui-range"),i(this,n).type="range",i(this,n).min=`${e.min}`,i(this,n).max=`${e.max}`,typeof e.step=="number"?i(this,n).step=`${e.step}`:i(this,n).step="1",i(this,n).value=`${e.value}`,!e.showValue){this.addChild(i(this,n)),i(this,n).addEventListener("change",()=>{i(this,n).title=i(this,n).value,e.onChange&&e.onChange(parseInt(i(this,n).value))});return}const a=e.showValue?new R(`${e.value}`):void 0;i(this,n).addEventListener("change",()=>{i(this,n).title=i(this,n).value,a&&a.setText(i(this,n).value),e.onChange&&e.onChange(parseInt(i(this,n).value))}),a?this.addChild(new ne({left:i(this,n),right:a,gap:Q(.5),fixedSide:"right"})):this.addChild(i(this,n))}validate(){return!0}setDisabled(e){i(this,n).disabled=e}}n=new WeakMap;class ge extends ee{constructor(){super(),this.form={name:"",age:30,district:"\u5F90\u5BB6\u6C47",street:"",edudition:"",aggree:!1,score:5,color:""},this.render()}buildContent(){let t,e;this.addChild(new ie("\u8868\u5355"),new u(20),new re({onSubmit:()=>this.handleSubmit(),children:[new v("\u59D3\u540D"),new u("sm"),new z({autofocus:!0,required:!0,value:this.form.name,placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D,2-32\u5B57\u7B26",minLength:2,maxLength:32,validator:this.checkName,onChange:a=>{this.form.name=a,t.setDisabled(!this.form.name)}}),new u,new v("\u5E74\u9F84"),new u("sm"),new me({value:this.form.age,placeholder:"\u8BF7\u8F93\u5165\u5E74\u9F84,6-60",min:{min:6,errMsg:"\u4E0D\u80FD\u5C0F\u4E8E6\u5C81\u54E6"},max:60,required:!0,onChange:a=>this.form.age=a}),new u,new v("\u5165\u804C\u65E5\u671F (\u5FC5\u987B\u5148\u8F93\u5165\u59D3\u540D) "),new u("sm"),t=new de({value:this.form.entryDate,placeholder:"\u8BF7\u8F93\u5165\u5165\u804C\u65F6\u95F4, 90 \u5E74\u5230 23 \u5E74\u4E4B\u95F4",disabled:!this.form.name,min:new Date("1990/01/01"),max:new Date("2023/12/12"),required:!0,onChange:a=>this.form.entryDate=a}),new u,new v("\u4E2A\u4EBA\u4ECB\u7ECD\uFF0C100-500\u5B57"),new u("sm"),new fe({value:this.form.intro,minLength:100,maxLength:500,placeholder:"\u8BF7\u8F93\u5165\u4ECB\u7ECD\u4FE1\u606F",rows:3,onChange:a=>this.form.intro=a}),new u,new v("\u884C\u653F\u533A"),new u("sm"),new Y({value:this.form.district,required:!0,options:[{label:"-- \u8BF7\u9009\u62E9 --",value:""},{label:"\u5F90\u5BB6\u6C47",value:"\u5F90\u5BB6\u6C47"},{label:"\u957F\u5B81\u533A",value:"\u957F\u5B81\u533A"},{label:"\u9646\u5BB6\u5634",value:"\u9646\u5BB6\u5634"}],onChange:a=>{this.form.district=a;const g=this.buildStreetSelect();e.replaceBy(g),e=g}}),new u,new v("\u8857\u9053"),new u("sm"),e=this.buildStreetSelect(),new u,new v("\u989C\u8272\u504F\u597D"),new u("sm"),new oe({value:this.form.color,required:!0,onChange:a=>this.form.color=a}),new u,new v("\u53D7\u6559\u80B2\u7A0B\u5EA6"),new u("sm"),new he({value:this.form.edudition,inline:!0,options:[{label:"\u5C0F\u5B66",value:"primary school"},{label:"\u521D\u4E2D",value:"junior high school"},{label:"\u9AD8\u4E2D",value:"high school"},{label:"\u4E13\u79D1",value:"junior college"},{label:"\u672C\u79D1",value:"bachelor"}],onChange:a=>this.form.edudition=a}),new u,new v("\u6280\u80FD\uFF08\u9009\u62E91-3\u4E2A\uFF09"),new u("sm"),new le({value:this.form.skills,inline:!0,minSelected:2,maxSelected:3,options:[{label:"Java",value:"Java"},{label:"Html",value:"Html"},{label:"Css",value:"Css"},{label:"Javascript",value:"Javascript"},{label:"Nodejs",value:"Nodejs"},{label:"golang",value:"golang"},{label:"python",value:"python"},{label:"rust",value:"rust"},{label:"c",value:"c"},{label:"c++",value:"c++"},{label:"c#",value:"c#"}],onChange:a=>this.form.skills=a}),new u,new v("\u670D\u52A1\u8BC4\u5206"),new u("sm"),new ce({min:1,max:10,showValue:!0,value:this.form.score}),new u,new se({required:!0,value:this.form.aggree,label:"\u540C\u610F\u9690\u79C1\u534F\u8BAE\u6761\u6B3E",onChange:a=>this.form.aggree=a}),new u,new te({gap:Q(1),children:[new J({type:"primary",formType:"submit",text:"\u63D0\u4EA4"}),new J({text:"\u8FD4\u56DE",onClick:()=>history.back()})]})]}))}buildStreetSelect(){return new Y({value:this.form.street,options:this.form.district?[{label:"-- \u8BF7\u9009\u62E9 --",value:""},{label:`${this.form.district}-\u8857\u9053\u4E00`,value:"\u8857\u9053\u4E00"},{label:`${this.form.district}-\u8857\u9053\u4E8C`,value:"\u8857\u9053\u4E8C"},{label:`${this.form.district}-\u8857\u9053\u4E09`,value:"\u8857\u9053\u4E09"}]:[{label:"-- \u8BF7\u9009\u62E9 --",value:""}],onChange:t=>{t&&(this.form.street=t)}})}handleSubmit(){ae({title:"\u8868\u5355\u63D0\u4EA4\u6570\u636E",body:H({tag:"pre",style:{overflow:"auto"},innerText:JSON.stringify(this.form,void 0,2)})})}checkName(t){return t.match(/\s/)?{valid:!1,msg:"\u540D\u79F0\u91CC\u4E0D\u80FD\u6709\u7A7A\u683C"}:{valid:!0}}}function Fe(){return new O(new ge)}export{Fe as formTest};
