import{M as p,f as y,c as d,b as c,i as n,m as C,n as L,r as w,T as D,F,L as B,S as a,P as r,H as S,B as f}from"./index.936704ca.js";import{s as k}from"./index.858539f3.js";import{F as o,I as u}from"./invalid-feedback.86259d42.js";import{C as g,B as $}from"./bool-checkbox.0c356a89.js";import{T as m}from"./text.9e1eeb59.js";import{H as q}from"./split-box.045b8717.js";class T extends p{constructor(e){const t=document.createElement("form");t.noValidate=!0,t.autocomplete=e.autocomplete?"on":"off",super(t),this.opts=e,this.addChild(...y(e.children)),t.addEventListener("submit",i=>{i.preventDefault(),this.submit()})}submit(){if(!this.opts.onSubmit)return;const e=this.find(t=>t instanceof o).filter(t=>!t.validate());if(e.length){e[0].scrollIntoViewIfInvisible();return}this.opts.onSubmit()}}class M extends o{constructor(e){super(document.createElement("div")),this.opts=e,this.values=[],this.disabled=!1,this.el.classList.add("wok-ui-checkbox-group"),e.inline&&this.el.classList.add("inline"),e.value&&(this.values=[...e.value]),e.disabled&&(this.disabled=!0),this.addChild(...e.options.map(t=>d({tag:"label",classNames:["item"],children:[new g({value:t.value,status:this.values.includes(t.value)?"checked":"unchecked",disabled:this.disabled,onChange:i=>{if(i==="checked")this.values.includes(t.value)||(this.values.push(t.value),this.handleChange());else{const l=this.values.indexOf(t.value);l!==-1&&(this.values.splice(l,1),this.handleChange())}}}),new c(t.label)]})))}handleChange(){this.opts.onChange&&this.opts.onChange(this.values),this.validate()}_validate(){if(!this.values.length)return this.opts.required?{valid:!1,msg:typeof this.opts.required=="string"?this.opts.required:n("form-err-must-check")}:{valid:!0};if(typeof this.opts.minSelected=="number"){if(this.values.length<this.opts.minSelected)return{valid:!1,msg:n("form-err-min-select",`${this.opts.minSelected}`)}}else if(this.opts.minSelected&&this.values.length<this.opts.minSelected.minSelected)return{valid:!1,msg:this.opts.minSelected.errMsg};if(typeof this.opts.maxSelected=="number"){if(this.values.length>this.opts.maxSelected)return{valid:!1,msg:n("form-err-max-select",`${this.opts.maxSelected}`)}}else if(this.opts.maxSelected&&this.values.length>this.opts.maxSelected.maxSelected)return{valid:!1,msg:this.opts.maxSelected.errMsg};return{valid:!0}}validate(){const e=this._validate();return this.getChildren().filter(t=>t instanceof u).forEach(t=>t.destroy()),e.valid||this.addChild(new u(e.msg)),e.valid}setDisabled(e){this.disabled!==e&&(this.disabled=e,this.find(t=>t instanceof g).map(t=>t).forEach(t=>t.setDisabled(this.disabled)))}}function A(){const s=new Date().getTime(),e=Math.floor(Math.random()*1e8);return`${s.toString(36)}${e.toString(36)}`}class v extends p{constructor(e){const t=document.createElement("input");t.type="radio",t.name=e.name,t.value=e.value,t.classList.add("wok-ui-radio"),super(t),this.input=t,e.checked&&(t.checked=!0),e.disabled&&(t.disabled=!0),e.onChecked&&(t.onchange=()=>{t.checked&&e.onChecked&&e.onChecked()})}isChecked(){return this.input.checked}setChecked(e){this.input.checked!==e&&(this.input.checked=e)}getValue(){return this.input.value}setDisabled(e){this.input.disabled=e}}class z extends o{constructor(e){super(document.createElement("div")),this.opts=e,this.value="",this.el.classList.add("wok-ui-radio-group"),this.name=A(),e.inline&&this.el.classList.add("inline"),this.addChild(...e.options.map(t=>d({tag:"label",children:[new v({name:this.name,value:t.value,checked:e.value===t.value,disabled:e.disabled,onChecked:()=>{this.value=t.value,this.opts.onChange&&this.opts.onChange(this.value),this.validate()}}),new c(t.label)]})))}_validate(){return this.value?{valid:!0}:this.opts.required?{valid:!1,msg:typeof this.opts.required=="string"?this.opts.required:n("form-err-must-check")}:{valid:!0}}validate(){const e=this._validate();return this.getChildren().filter(t=>t instanceof u).forEach(t=>t.destroy()),e.valid||this.addChild(new u(e.msg)),e.valid}setDisabled(e){this.find(t=>t instanceof v).map(t=>t).forEach(t=>t.setDisabled(e))}}class I extends m{constructor(e){super({required:e.required,value:e.value?h(e.value):void 0,disabled:e.disabled,placeholder:e.placeholder,size:e.size,validator(t){if(!t)return e.required?{valid:!1,msg:typeof e.required=="string"?e.required:n("form-err-required")}:{valid:!0};const i=x(t);if(e.min instanceof Date){if(i.getTime()<e.min.getTime())return{valid:!1,msg:n("form-err-min",`${h(e.min)}`)}}else if(e.min&&i.getTime()<e.min.min.getTime())return{valid:!1,msg:e.min.errMsg};if(e.max instanceof Date){if(i.getTime()>e.max.getTime())return{valid:!1,msg:n("form-err-max",`${h(e.max)}`)}}else if(e.max&&i.getTime()>e.max.max.getTime())return{valid:!1,msg:e.max.errMsg};return{valid:!0}},onChange(t){if(!!e.onChange){if(!t){e.onChange(void 0);return}e.onChange(x(t))}},onBlur:e.onBlur}),this.input.type="date",e.min instanceof Date?this.input.min=h(e.min):e.min&&(this.input.min=h(e.min.min)),e.max instanceof Date?this.input.min=h(e.max):e.max&&(this.input.min=h(e.max.max))}}function h(s){const e=s.getFullYear(),t=s.getMonth()+1,i=s.getDate(),l=t>=10?`${t}`:`0${t}`,E=i>=10?`${s}`:`0${i}`;return`${e}-${l}-${E}`}function x(s){return new Date(s)}class N extends m{constructor(e){super(e),this.input.type="color"}}class P extends m{constructor(e){super({required:e.required,placeholder:e.placeholder,value:e.value?`${e.value}`:void 0,disabled:e.disabled,size:e.size,validator(t){if(!t)return e.required?{valid:!1,msg:typeof e.required=="string"?e.required:n("form-err-required")}:{valid:!0};const i=parseFloat(t);if(isNaN(i))return{valid:!1,msg:n("form-err-number")};if(typeof e.max=="number"){if(i>e.max)return{valid:!1,msg:n("form-err-max",`${e.max}`)}}else if(e.max&&i>e.max.max)return{valid:!1,msg:e.max.errMsg};if(typeof e.min=="number"){if(i<e.min)return{valid:!1,msg:n("form-err-min",`${e.min}`)}}else if(e.min&&i<e.min.min)return{valid:!1,msg:e.min.errMsg};return e.validator?e.validator(i):{valid:!0}},onChange(t){e.onChange&&(t?e.onChange(parseFloat(t)):e.onChange(void 0))},onBlur:e.onBlur}),this.input.type="number",typeof e.max=="number"?this.input.max=`${e.max}`:e.max&&(this.input.max=`${e.max.max}`),typeof e.min=="number"?this.input.min=`${e.min}`:e.min&&(this.input.min=`${e.min.min}`)}}class _ extends o{constructor(e){super(document.createElement("div")),this.opts=e,this.composing=!1,this.textarea=document.createElement("textarea"),this.textarea.classList.add("wok-ui-input");const t=C();switch(e.size){case"lg":this.textarea.style.setProperty("--input-font-size",`${t.textLg}px`);break;case"sm":this.textarea.style.setProperty("--input-font-size",`${t.textSm}px`);break;default:this.textarea.style.setProperty("--input-font-size",`${t.text}px`);break}if(this.addChild(this.textarea),this.textarea.rows=e.rows&&e.rows>0?e.rows:3,typeof e.minLength=="number"?this.textarea.minLength=e.minLength:e.minLength&&(this.textarea.minLength=e.minLength.minLength),typeof e.maxLength=="number"?this.textarea.maxLength=e.maxLength:e.maxLength&&(this.textarea.maxLength=e.maxLength.maxLength),e.required&&(this.textarea.required=!0),e.value&&(this.textarea.value=e.value),e.disabled&&(this.textarea.disabled=!0),e.placeholder&&(this.textarea.placeholder=e.placeholder),this.textarea.addEventListener("compositionstart",()=>this.composing=!0),this.textarea.addEventListener("compositionend",()=>{this.composing=!1,this.handleChange()}),this.textarea.addEventListener("input",()=>{this.composing||this.handleChange()}),e.onBlur){const{onBlur:i}=e;this.textarea.addEventListener("blur",()=>i())}}handleChange(){this.opts.onChange&&this.opts.onChange(this.textarea.value),this.validate()}_validate(e){if(this.opts.required&&!e)return{valid:!1,msg:typeof this.opts.required=="string"?this.opts.required:n("form-err-required")};if(!e)return{valid:!0};if(typeof this.opts.minLength=="number"){if(e.length<this.opts.minLength)return{valid:!1,msg:n("form-err-min-length",`${this.opts.minLength}`)}}else if(this.opts.minLength&&e.length<this.opts.minLength.minLength)return{valid:!1,msg:this.opts.minLength.errMsg};if(typeof this.opts.maxLength=="number"){if(e.length>this.opts.maxLength)return{valid:!1,msg:n("form-err-max-length",`${this.opts.maxLength}`)}}else if(this.opts.maxLength&&e.length>this.opts.maxLength.maxLength)return{valid:!1,msg:this.opts.maxLength.errMsg};return this.opts.validator?this.opts.validator(e):{valid:!0}}validate(){const e=this._validate(this.textarea.value);return this.getChildren().filter(t=>t instanceof u).forEach(t=>t.destroy()),e.valid?this.textarea.classList.remove("invalid"):(this.textarea.classList.add("invalid"),this.addChild(new u(e.msg))),e.valid}setDisabled(e){this.textarea.disabled=e}}class b extends o{constructor(e){super(document.createElement("div")),this.opts=e,this.addChild(d({tag:"select",classNames:["wok-ui-select"],preHandle:i=>{this.select=i,e.value&&(this.select.value=e.value),this.select.addEventListener("change",l=>{this.opts.onChange&&this.opts.onChange(this.select.value),this.validate()})},children:e.options.map(i=>d({tag:"option",innerText:i.label,attrs:{value:i.value}}))}));const t=C();switch(e.size){case"lg":this.select.style.setProperty("--select-font-size",`${t.textLg}px`);break;case"sm":this.select.style.setProperty("--select-font-size",`${t.textSm}px`);break;default:this.select.style.setProperty("--select-font-size",`${t.text}px`);break}}_validate(e){return this.opts.required&&!e?{valid:!1,msg:typeof this.opts.required=="string"?this.opts.required:n("form-err-required")}:{valid:!0}}validate(){const e=this._validate(this.select.value);return this.getChildren().filter(t=>t instanceof u).forEach(t=>t.destroy()),e.valid?this.select.classList.remove("invalid"):(this.select.classList.add("invalid"),this.addChild(new u(e.msg))),e.valid}setDisabled(e){this.select.disabled=e}}class H extends o{constructor(e){if(super(document.createElement("div")),this.opts=e,this.input=document.createElement("input"),this.input.classList.add("wok-ui-range"),this.input.type="range",this.input.min=`${e.min}`,this.input.max=`${e.max}`,typeof e.step=="number"?this.input.step=`${e.step}`:this.input.step="1",this.input.value=`${e.value}`,!e.showValue){this.addChild(this.input),this.input.addEventListener("change",()=>{this.input.title=this.input.value,e.onChange&&e.onChange(parseInt(this.input.value))});return}const t=e.showValue?new c(`${e.value}`):void 0;this.input.addEventListener("change",()=>{this.input.title=this.input.value,t&&t.setText(this.input.value),e.onChange&&e.onChange(parseInt(this.input.value))}),t?this.addChild(new q({left:L(this.input),right:t,gap:w(.5),fixedSide:"right"})):this.addChild(this.input)}validate(){return!0}setDisabled(e){this.input.disabled=e}}class R extends F{constructor(){super(),this.form={name:"",age:30,district:"",street:"",edudition:"",aggree:!1,score:5,color:""},this.render()}buildContent(){let e,t;this.addChild(new B("\u8868\u5355"),new a(20),new T({onSubmit:()=>this.handleSubmit(),children:[new r("\u59D3\u540D"),new a("sm"),new m({autofocus:!0,required:!0,value:this.form.name,placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D,2-32\u5B57\u7B26",minLength:2,maxLength:32,validator:this.checkName,onChange:i=>{this.form.name=i,e.setDisabled(!this.form.name)}}),new a,new r("\u5E74\u9F84"),new a("sm"),new P({value:this.form.age,placeholder:"\u8BF7\u8F93\u5165\u5E74\u9F84,6-60",min:{min:6,errMsg:"\u4E0D\u80FD\u5C0F\u4E8E6\u5C81\u54E6"},max:60,required:!0,onChange:i=>this.form.age=i}),new a,new r("\u5165\u804C\u65E5\u671F (\u5FC5\u987B\u5148\u8F93\u5165\u59D3\u540D) "),new a("sm"),e=new I({value:this.form.entryDate,placeholder:"\u8BF7\u8F93\u5165\u5165\u804C\u65F6\u95F4, 90 \u5E74\u5230 23 \u5E74\u4E4B\u95F4",disabled:!this.form.name,min:new Date("1990/01/01"),max:new Date("2023/12/12"),required:!0,onChange:i=>this.form.entryDate=i}),new a,new r("\u4E2A\u4EBA\u4ECB\u7ECD\uFF0C100-500\u5B57"),new a("sm"),new _({value:this.form.intro,minLength:100,maxLength:500,placeholder:"\u8BF7\u8F93\u5165\u4ECB\u7ECD\u4FE1\u606F",rows:3,onChange:i=>this.form.intro=i}),new a,new r("\u884C\u653F\u533A"),new a("sm"),new b({value:this.form.district,required:!0,options:[{label:"-- \u8BF7\u9009\u62E9 --",value:""},{label:"\u5F90\u5BB6\u6C47",value:"\u5F90\u5BB6\u6C47"},{label:"\u957F\u5B81\u533A",value:"\u957F\u5B81\u533A"},{label:"\u9646\u5BB6\u5634",value:"\u9646\u5BB6\u5634"}],onChange:i=>{this.form.district=i;const l=this.buildStreetSelect();t.replaceBy(l),t=l}}),new a,new r("\u8857\u9053"),new a("sm"),t=this.buildStreetSelect(),new a,new r("\u989C\u8272\u504F\u597D"),new a("sm"),new N({value:this.form.color,required:!0,onChange:i=>this.form.color=i}),new a,new r("\u53D7\u6559\u80B2\u7A0B\u5EA6"),new a("sm"),new z({value:this.form.edudition,inline:!0,options:[{label:"\u5C0F\u5B66",value:"primary school"},{label:"\u521D\u4E2D",value:"junior high school"},{label:"\u9AD8\u4E2D",value:"high school"},{label:"\u4E13\u79D1",value:"junior college"},{label:"\u672C\u79D1",value:"bachelor"}],onChange:i=>this.form.edudition=i}),new a,new r("\u6280\u80FD\uFF08\u9009\u62E91-3\u4E2A\uFF09"),new a("sm"),new M({value:this.form.skills,inline:!0,minSelected:2,maxSelected:3,options:[{label:"Java",value:"Java"},{label:"Html",value:"Html"},{label:"Css",value:"Css"},{label:"Javascript",value:"Javascript"},{label:"Nodejs",value:"Nodejs"},{label:"golang",value:"golang"},{label:"python",value:"python"},{label:"rust",value:"rust"},{label:"c",value:"c"},{label:"c++",value:"c++"},{label:"c#",value:"c#"}],onChange:i=>this.form.skills=i}),new a,new r("\u670D\u52A1\u8BC4\u5206"),new a("sm"),new H({min:1,max:10,showValue:!0,value:this.form.score}),new a,new $({required:!0,value:this.form.aggree,label:"\u540C\u610F\u9690\u79C1\u534F\u8BAE\u6761\u6B3E",onChange:i=>this.form.aggree=i}),new a,new S({gap:w(1),children:[new f({type:"primary",formType:"submit",text:"\u63D0\u4EA4"}),new f({text:"\u8FD4\u56DE",onClick:()=>history.back()})]})]}))}buildStreetSelect(){return new b({value:this.form.street,options:[{label:"-- \u8BF7\u9009\u62E9 --",value:""},{label:`${this.form.district}-\u8857\u9053\u4E00`,value:"\u8857\u9053\u4E00"},{label:`${this.form.district}-\u8857\u9053\u4E8C`,value:"\u8857\u9053\u4E8C"},{label:`${this.form.district}-\u8857\u9053\u4E09`,value:"\u8857\u9053\u4E09"}]})}handleSubmit(){k({title:"\u8868\u5355\u63D0\u4EA4\u6570\u636E",body:d({tag:"pre",style:{overflow:"auto"},innerText:JSON.stringify(this.form,void 0,2)})})}checkName(e){return e.match(/\s/)?{valid:!1,msg:"\u540D\u79F0\u91CC\u4E0D\u80FD\u6709\u7A7A\u683C"}:{valid:!0}}}function Q(){return new D(new R)}export{Q as formTest};
