var g=(n,s,t)=>{if(!s.has(n))throw TypeError("Cannot "+t)};var e=(n,s,t)=>(g(n,s,"read from private field"),t?t.call(n):s.get(n)),a=(n,s,t)=>{if(s.has(n))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(n):s.set(n,t)},u=(n,s,t,h)=>(g(n,s,"write to private field"),h?h.call(n,t):s.set(n,t),t);var d=(n,s,t)=>(g(n,s,"access private method"),t);import{g as f,m as c}from"./index.0f65c826.js";import{F as x,I as o}from"./invalid-feedback.11287e18.js";var r,i,l,p,m,L;class E extends x{constructor(t){super(document.createElement("div"));a(this,l);a(this,m);a(this,r,void 0);a(this,i,void 0);u(this,r,!1),u(this,i,t),this.input=document.createElement("input"),this.input.type="text",this.input.classList.add("wok-ui-input");const h=c();switch(t.size){case"lg":this.input.style.setProperty("--input-font-size",`${h.textLg}px`);break;case"sm":this.input.style.setProperty("--input-font-size",`${h.textSm}px`);break;default:this.input.style.setProperty("--input-font-size",`${h.text}px`);break}this.addChild(this.input),this.input.placeholder=t.placeholder||"",typeof t.minLength=="number"?this.input.minLength=t.minLength:t.minLength&&(this.input.minLength=t.minLength.minLength),typeof t.maxLength=="number"?this.input.maxLength=t.maxLength:t.maxLength&&(this.input.maxLength=t.maxLength.maxLength),t.required&&(this.input.required=!0),t.value&&(this.input.value=t.value),t.disabled&&(this.input.disabled=!0),this.input.addEventListener("compositionstart",()=>u(this,r,!0)),this.input.addEventListener("compositionend",()=>{u(this,r,!1),d(this,l,p).call(this)}),this.input.addEventListener("input",()=>{e(this,r)||d(this,l,p).call(this)}),t.onBlur&&this.input.addEventListener("blur",t.onBlur)}mount(t){super.mount(t),e(this,i).autofocus&&setTimeout(()=>this.input.focus(),0)}focus(){this.input.focus()}validate(){const t=d(this,m,L).call(this,this.input.value);return this.getChildren().filter(h=>h instanceof o).forEach(h=>h.destroy()),t.valid?this.input.classList.remove("invalid"):(this.input.classList.add("invalid"),this.addChild(new o(t.msg))),t.valid}setDisabled(t){this.input.disabled=t}}r=new WeakMap,i=new WeakMap,l=new WeakSet,p=function(){e(this,i).onChange&&e(this,i).onChange(this.input.value),this.validate()},m=new WeakSet,L=function(t){if(e(this,i).required&&!t)return{valid:!1,msg:typeof e(this,i).required=="string"?e(this,i).required:f().buildMsg("form-err-required")};if(!t)return{valid:!0};if(typeof e(this,i).minLength=="number"){if(t.length<e(this,i).minLength)return{valid:!1,msg:f().buildMsg("form-err-min-length",`${e(this,i).minLength}`)}}else if(e(this,i).minLength&&t.length<e(this,i).minLength.minLength)return{valid:!1,msg:e(this,i).minLength.errMsg};if(typeof e(this,i).maxLength=="number"){if(t.length>e(this,i).maxLength)return{valid:!1,msg:f().buildMsg("form-err-max-length",`${e(this,i).maxLength}`)}}else if(e(this,i).maxLength&&t.length>e(this,i).maxLength.maxLength)return{valid:!1,msg:e(this,i).maxLength.errMsg};return e(this,i).validator?e(this,i).validator(t):{valid:!0}};export{E as T};
